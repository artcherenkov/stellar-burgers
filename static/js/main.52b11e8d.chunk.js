(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{10:function(e,t,n){e.exports={root:"modal_root__QSEqe",root_open:"modal_root_open__1wBPy",content:"modal_content__1tQ-X",closeButton:"modal_closeButton__2SoUT",image:"modal_image__nuFwr",title:"modal_title__1efUU",nutritionFacts:"modal_nutritionFacts__1W4Tf",nutritionFact:"modal_nutritionFact__1COEE",nutritionFact_size_l:"modal_nutritionFact_size_l__2YrG_",nutritionText:"modal_nutritionText__11aab"}},106:function(e,t,n){e.exports={root:"modal-overlay_root__3Bmoz"}},107:function(e,t,n){e.exports={root:"order-details_root__2yQn2"}},15:function(e,t,n){e.exports={root:"burger-ingredients_root__BqyBa pt-10",ingredientsContainer:"burger-ingredients_ingredientsContainer__2Y7_F",title:"burger-ingredients_title__32v1n mb-5",ingredientsList:"burger-ingredients_ingredientsList__1hPvZ pl-4 pr-4",link:"burger-ingredients_link__2-zFo",burgerIngredient:"burger-ingredients_burgerIngredient__1tjtK",ingredientCost:"burger-ingredients_ingredientCost__2NLOC",ingredientTitle:"burger-ingredients_ingredientTitle__25WRr",tabLink:"burger-ingredients_tabLink__3h-uF"}},19:function(e,t,n){e.exports={stats:"stats_stats__3a6_C",ordersStatuses:"stats_ordersStatuses__1tphG",idsList:"stats_idsList__3T_X3",orderId:"stats_orderId__UF0E5",orderId_highlight:"stats_orderId_highlight__gg-hS",globalStats:"stats_globalStats__3kqGZ",stat:"stats_stat__3B5uu"}},197:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var r,i=n(1),c=n.n(i),a=n(38),s=n.n(a),o=n(4),d=n(9),l=n.n(d),u=n(16),j=n(39),p=n.n(j),b=n(11),f=n(8),m=n(2),x=n.n(m),_=n(7),h=n(27),O=n.n(h),g=n(0),y=function(e){return Object(g.jsxs)("p",{className:x()(O.a.hint,"text text_type_main-default text_color_inactive"),children:[e.children," ",Object(g.jsx)(_.b,{to:e.linkHref,className:x()(O.a.hintLink,"text text_type_main-default"),children:e.linkTitle})]})},v=function(e){return Object(g.jsx)("div",{className:x()(O.a.inputContainer,"mb-6"),children:e.children})},N=function(e){var t=e.children;return Object(g.jsx)("div",{className:x()(O.a.buttonWrapper,"mb-20"),children:Object(g.jsx)(o.Button,{type:"primary",size:"medium",children:t})})},C=function(e){var t=e.children;return Object(g.jsx)("p",{className:x()(O.a.title,"text text_type_main-medium mb-6"),children:t})},k=function(e){var t=e.children,n=e.onSubmit;return Object(g.jsx)("form",{className:O.a.form,onSubmit:n,children:t})},w=k,I=n(47),T=function(){return Object(I.b)()},S=I.c,E=n(5),D=n(12),L="https://norma.nomoreparties.space/api",P=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:if("jwt expired"!==e.sent.message){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("jwt expired")));case 7:return e.abrupt("return",Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(t.status))));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t="".concat(L,"/orders/all");return fetch(t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return P(e)}))},B={accessToken:"",isAuthenticated:!1,user:{name:"",email:""},loading:!1,error:!1,canResetPassword:!1},R=Object(D.c)("user/refresh-token",(function(){var e,t=localStorage.getItem("refresh-token");if(!t)throw new Error("There is no refresh token in local storage");return(e=t,fetch("".concat(L,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then((function(e){return P(e)}))).then((function(e){return localStorage.setItem("refresh-token",e.refreshToken),Object(E.a)(Object(E.a)({},e),{},{accessToken:e.accessToken.split("Bearer ")[1]})}))})),F=Object(D.c)("user/register",(function(e){return function(e){return fetch("".concat(L,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return P(e)}))}(e).then((function(e){return localStorage.setItem("refresh-token",e.refreshToken),Object(E.a)(Object(E.a)({},e),{},{accessToken:e.accessToken.split("Bearer ")[1]})})).catch((function(){throw new Error("An error occurred")}))})),W=Object(D.c)("user/login",(function(e){return function(e){return fetch("".concat(L,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return P(e)}))}(e).then((function(e){return localStorage.setItem("refresh-token",e.refreshToken),Object(E.a)(Object(E.a)({},e),{},{accessToken:e.accessToken.split("Bearer ")[1]})}))})),q=Object(D.c)("user/logout",(function(){var e=localStorage.getItem("refresh-token");if(!e)throw new Error("There is no refresh token in local storage");return function(e){return fetch("".concat(L,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then(P)}(e).then((function(e){return localStorage.removeItem("refresh-token"),e}))})),M=Object(D.c)("user/forgot-password",(function(e){return function(e){return fetch("".concat(L,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then(P)}(e)})),H=Object(D.c)("user/get-user",(function(e,t){return function(e){return fetch("".concat(L,"/auth/user"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return P(e)}))}(t.getState().user.accessToken).then((function(e){return e.user})).catch(function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("jwt expired"!==n.message&&"wtf"!==n.message){e.next=5;break}return e.next=3,t.dispatch(R());case 3:r=e.sent,R.fulfilled.match(r)&&t.dispatch(H());case 5:t.rejectWithValue("error");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),J=Object(D.c)("user/patch-user",(function(e,t){return function(e,t){return fetch("".concat(L,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}).then((function(e){return P(e)}))}(t.getState().user.accessToken,e).then((function(e){return e.user})).catch(function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("jwt expired"!==n.message&&"wtf"!==n.message){e.next=5;break}return e.next=3,t.dispatch(R());case 3:r=e.sent,R.fulfilled.match(r)&&t.dispatch(H());case 5:t.rejectWithValue("error");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),G=Object(D.e)({name:"user",initialState:B,reducers:{allowPasswordReset:function(e){e.canResetPassword=!0},restrictPasswordReset:function(e){e.canResetPassword=!1}},extraReducers:function(e){e.addCase(F.pending,(function(e){e.error=!1,e.loading=!0})),e.addCase(F.fulfilled,(function(e,t){e.loading=!1,e.accessToken=t.payload.accessToken,e.user=t.payload.user,e.isAuthenticated=!0})),e.addCase(F.rejected,(function(e){e.loading=!1,e.error=!0})),e.addCase(W.pending,(function(e){e.error=!1,e.loading=!0})),e.addCase(W.fulfilled,(function(e,t){e.loading=!1,t.payload&&(e.accessToken=t.payload.accessToken,e.user=t.payload.user),e.isAuthenticated=!0})),e.addCase(W.rejected,(function(e){e.loading=!1,e.error=!0})),e.addCase(R.pending,(function(e){e.error=!1,e.loading=!0})),e.addCase(R.fulfilled,(function(e,t){e.loading=!1,e.accessToken=t.payload.accessToken,e.isAuthenticated=!0})),e.addCase(R.rejected,(function(e){e.loading=!1,e.error=!0})),e.addCase(q.pending,(function(e){e.error=!1,e.loading=!0})),e.addCase(q.fulfilled,(function(){return B})),e.addCase(q.rejected,(function(e){e.loading=!1,e.error=!0})),e.addCase(H.pending,(function(e){e.error=!1,e.loading=!0})),e.addCase(H.fulfilled,(function(e,t){t.payload&&(e.user=t.payload)})),e.addCase(H.rejected,(function(e){e.loading=!1,e.error=!0})),e.addCase(J.pending,(function(e){e.error=!1,e.loading=!0})),e.addCase(J.fulfilled,(function(e,t){t.payload&&(e.user=t.payload)})),e.addCase(J.rejected,(function(e){e.loading=!1,e.error=!0}))}}),U=function(e){return e.user.isAuthenticated},z=function(e){return e.user.user},X=function(e){return e.user.canResetPassword},Y=function(e){return e.user.accessToken},Q=G.actions,V=G.reducer,K=Q.allowPasswordReset,Z=(Q.restrictPasswordReset,V),$=n(14),ee=n(25),te=n.n(ee),ne=function(){var e=Object(b.g)(),t=Object(i.useMemo)((function(){return e.location.pathname}),[e.location]);return Object(g.jsx)("header",{className:x()(te.a.root),children:Object(g.jsx)("div",{className:te.a.container,children:Object(g.jsxs)("div",{className:te.a.linksContainer,children:[Object(g.jsx)(_.b,{className:te.a.logo,to:"/",children:Object(g.jsx)(o.Logo,{})}),Object(g.jsxs)(_.b,{className:x()(te.a.link,Object($.a)({},te.a.link_active,"/"===t)),to:"/",children:[Object(g.jsx)(o.BurgerIcon,{type:"/"===t?"primary":"secondary"}),Object(g.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(g.jsxs)(_.b,{className:x()(te.a.link,Object($.a)({},te.a.link_active,"/feed"===t)),to:"/feed",children:[Object(g.jsx)(o.ListIcon,{type:"/feed"===t?"primary":"secondary"}),Object(g.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(g.jsxs)(_.b,{className:x()(te.a.link,te.a.link_right,Object($.a)({},te.a.link_active,"/profile"===t)),to:"/profile",children:[Object(g.jsx)(o.ProfileIcon,{type:"/profile"===t?"primary":"secondary"}),Object(g.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})})},re=function(e){return e.className?Object(g.jsxs)("div",{className:e.className,children:[Object(g.jsx)(ne,{}),e.children]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(ne,{}),e.children]})},ie=function(){var e=T(),t=Object(b.g)(),n=c.a.useState(""),r=Object(f.a)(n,2),i=r[0],a=r[1],s=function(){var n=Object(u.a)(l.a.mark((function n(r){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.next=3,e(M(i));case 3:c=n.sent,M.fulfilled.match(c)&&(e(K()),t.replace("/reset-password"));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(g.jsx)(re,{children:Object(g.jsxs)(w,{onSubmit:s,children:[Object(g.jsx)(C,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(g.jsx)(v,{children:Object(g.jsx)(o.Input,{name:"email",value:i,onChange:function(e){return a(e.target.value)},type:"text",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(g.jsx)(N,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(g.jsx)(y,{linkHref:"/login",linkTitle:"\u0412\u043e\u0439\u0442\u0438",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})]})})},ce=n(10),ae=n.n(ce),se=function(e){return Object(g.jsxs)("ul",{className:ae.a.nutritionFacts,children:[Object(g.jsxs)("li",{className:x()(ae.a.nutritionFact,ae.a.nutritionFact_size_l),children:[Object(g.jsx)("p",{className:x()("text text_type_main-default text_color_inactive",ae.a.nutritionText),children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(g.jsx)("p",{className:x()("text text_type_digits-default text_color_inactive",ae.a.nutritionText),children:e.calories})]}),Object(g.jsxs)("li",{className:ae.a.nutritionFact,children:[Object(g.jsx)("p",{className:x()("text text_type_main-default text_color_inactive",ae.a.nutritionText),children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(g.jsx)("p",{className:x()("text text_type_digits-default text_color_inactive",ae.a.nutritionText),children:e.proteins})]}),Object(g.jsxs)("li",{className:ae.a.nutritionFact,children:[Object(g.jsx)("p",{className:x()("text text_type_main-default text_color_inactive",ae.a.nutritionText),children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(g.jsx)("p",{className:x()("text text_type_digits-default text_color_inactive",ae.a.nutritionText),children:e.fat})]}),Object(g.jsxs)("li",{className:ae.a.nutritionFact,children:[Object(g.jsx)("p",{className:x()("text text_type_main-default text_color_inactive",ae.a.nutritionText),children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(g.jsx)("p",{className:x()("text text_type_digits-default text_color_inactive",ae.a.nutritionText),children:e.carbohydrates})]})]})},oe=n(35),de="bun",le="sauce",ue="main";!function(e){e[e.ADD_BUN=0]="ADD_BUN",e[e.ADD_INGREDIENT=1]="ADD_INGREDIENT",e[e.DELETE_INGREDIENT=2]="DELETE_INGREDIENT"}(r||(r={}));var je,pe={bun:null,mains:[],price:0},be={ingredients:[],ingredientsLoading:!1,ingredientsError:!1,activeIngredientId:"",isDetailsPopupOpen:!1,constructor:pe,dragging:""},fe=function(e){var t=Object(oe.a)(e.constructor.mains);return e.constructor.bun&&t.push(e.constructor.bun),t.reduce((function(t,n){var r=e.ingredients.find((function(e){return e._id===n.id}));return r?t+r.price*n.qty:t}),0)},me=Object(D.c)("ingredients/fetchIngredients",(function(){return fetch("".concat(L,"/ingredients")).then((function(e){return P(e)}))})),xe=Object(D.e)({name:"ingredients",initialState:be,reducers:{openDetailsPopup:function(e){e.isDetailsPopupOpen=!0},setActiveIngredient:function(e,t){e.activeIngredientId=t.payload},resetActiveIngredient:function(e){e.activeIngredientId=""},closeDetailsPopup:function(e){e.isDetailsPopupOpen=!1},addIngredient:function(e,t){var n=e.ingredients.find((function(e){return e._id===t.payload}));if(n){if(n.type===de)return e.constructor.bun={id:t.payload,qty:2},void(e.constructor.price=fe(e));-1!==e.constructor.mains.findIndex((function(e){return e.id===t.payload}))?e.constructor.mains=e.constructor.mains.map((function(e){return e.id===t.payload?Object(E.a)(Object(E.a)({},e),{},{qty:e.qty+1}):e})):e.constructor.mains.push({id:t.payload,qty:1}),e.constructor.price=fe(e)}},deleteIngredient:function(e,t){var n=e.ingredients.find((function(e){return e._id===t.payload}));if(n&&n.type!==de){var r=e.constructor.mains.findIndex((function(e){return e.id===t.payload}));if(-1!==r){var i=e.constructor.mains[r];i.qty>1?i.qty-=1:e.constructor.mains=e.constructor.mains.filter((function(e){return e.id!==t.payload})),e.constructor.price=fe(e)}}},setDragging:function(e,t){e.dragging=t.payload},swapIngredients:function(e,t){var n=e.constructor.mains,r=n.findIndex((function(t){return t.id===e.dragging})),i=n.findIndex((function(e){return e.id===t.payload}));if(r>i){var c=n[i];n[i]=n[r],n[r]=c}else if(r<i){var a=n[r];n[r]=n[i],n[i]=a}},clearConstructor:function(e){e.constructor=pe}},extraReducers:function(e){e.addCase(me.pending,(function(e){e.ingredientsLoading=!0})),e.addCase(me.fulfilled,(function(e,t){e.ingredients=t.payload.data,e.ingredientsLoading=!1,e.ingredientsError=!1})),e.addCase(me.rejected,(function(e){e.ingredientsError=!0}))}}),_e=function(e){return e.ingredients.ingredients},he=function(e){var t=e.ingredients.ingredients.find((function(t){var n;return t._id===(null===(n=e.ingredients.constructor.bun)||void 0===n?void 0:n.id)}));return t?Object(E.a)(Object(E.a)({},t),{},{count:2}):null},Oe=function(e){return e.ingredients.constructor.mains.map((function(t){var n=e.ingredients.ingredients.find((function(e){return e._id===t.id}));return Object(E.a)(Object(E.a)({},n),{},{count:t.qty})}))},ge=function(e){return e.ingredients.constructor.price},ye=function(e){return e.ingredients.ingredientsLoading},ve=xe.actions,Ne=xe.reducer,Ce=(ve.closeDetailsPopup,ve.openDetailsPopup),ke=(ve.resetActiveIngredient,ve.addIngredient),we=ve.deleteIngredient,Ie=ve.setDragging,Te=ve.swapIngredients,Se=ve.setActiveIngredient,Ee=ve.clearConstructor,De=Ne,Le=function(){var e,t=Object(b.i)(),n=S((e=t.id,function(t){return t.ingredients.ingredients.find((function(t){return t._id===e}))}));return n?Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{style:{textAlign:"center"},className:"text text_type_main-large pt-3 pb-3",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(g.jsx)("img",{className:ae.a.image,src:n.image_large,alt:n.name}),Object(g.jsx)("h2",{className:x()("text text_type_main-medium pt-2 pb-8",ae.a.title),children:n.name}),Object(g.jsx)(se,Object(E.a)({},n))]}):Object(g.jsx)("div",{children:"Ingredient not found"})},Pe={display:"flex",alignItems:"center",justifyContent:"center",marginTop:120},Ae=function(){var e=S(_e),t=S(ye);return!e.length||t?Object(g.jsx)(re,{children:Object(g.jsx)("h2",{style:{textAlign:"center"},children:"Loading..."})}):Object(g.jsx)(re,{children:Object(g.jsx)("div",{style:Pe,children:Object(g.jsx)(Le,{})})})},Be=function(){var e=T(),t=c.a.useState(""),n=Object(f.a)(t,2),r=n[0],i=n[1],a=c.a.useState(""),s=Object(f.a)(a,2),d=s[0],j=s[1],p=function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(W({email:r,password:d}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsx)(re,{children:Object(g.jsxs)(k,{onSubmit:p,children:[Object(g.jsx)(C,{children:"\u0412\u0445\u043e\u0434"}),Object(g.jsx)(v,{children:Object(g.jsx)(o.Input,{name:"email",value:r,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"E-mail",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(g.jsx)(v,{children:Object(g.jsx)(o.PasswordInput,{name:"password",value:d,onChange:function(e){return j(e.target.value)}})}),Object(g.jsx)(N,{children:"\u0412\u043e\u0439\u0442\u0438"}),Object(g.jsx)(y,{linkHref:"/register",linkTitle:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",children:"\u0412\u044b \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(g.jsx)(y,{linkHref:"/forgot-password",linkTitle:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})]})})},Re=n(203),Fe=n(110),We=n(77),qe=n.n(We),Me=n(22),He=n.n(Me),Je=n(204),Ge=n(205),Ue=function(e){var t=T(),n=function(e){var t=Object(i.useRef)(null);return{containerRef:t,onClick:function(n){if(t.current){var r=t.current.querySelector(".constructor-element__action"),i=n.target;r.contains(i)||e()}}}}((function(){t(Se(e._id)),t(Ce())})),r=n.containerRef,c=n.onClick,a=Object(Je.a)({type:"order",item:{id:e._id},collect:function(e){return{opacity:e.isDragging()?.5:1,isDragging:e.isDragging()}}}),s=Object(f.a)(a,2),d=s[0],l=d.opacity,u=d.isDragging,j=s[1],p=Object(Ge.a)({accept:"order",collect:function(e){return{isHover:e.isOver(),target:e.getItem()}},drop:function(){t(Ie(""))}}),b=Object(f.a)(p,2),m=b[0],_=m.isHover,h=m.target,O=b[1];if(Object(i.useEffect)((function(){u&&t(Ie(e._id))}),[u]),Object(i.useEffect)((function(){_&&h.id!==e._id&&t(Te(e._id))}),[_,h]),e.bun&&e.position){var y="top"===e.position?" (\u0432\u0435\u0440\u0445)":" (\u043d\u0438\u0437)";return Object(g.jsx)("div",{className:x()(He.a.ingredientContainer,He.a.ingredientContainer_outter),children:Object(g.jsx)(o.ConstructorElement,{type:e.position,isLocked:!0,text:e.name+y,price:e.price,thumbnail:e.image})})}return Object(g.jsx)("li",{ref:O,className:He.a.listItem,children:Object(g.jsxs)("div",{className:He.a.item,ref:j,children:[Object(g.jsx)("button",{className:He.a.button,children:Object(g.jsx)(o.DragIcon,{type:"primary"})}),Object(g.jsx)("div",{className:He.a.ingredientContainer,onClick:c,ref:r,style:{opacity:l},children:Object(g.jsx)(o.ConstructorElement,{text:e.count<2?e.name:"".concat(e.name," x").concat(e.count),price:e.price,thumbnail:e.image,handleClose:function(){return t(we(e._id))}})})]})})},ze=n(106),Xe=n.n(ze),Ye=function(e){var t=Object(i.useRef)(null);return Object(g.jsx)("div",{className:Xe.a.root,onClick:function(n){n.target===t.current&&e.onClose()},ref:t})},Qe=document.getElementById("react-modals"),Ve=function(e){return Object(i.useEffect)((function(){var t=function(t){"Escape"===t.key&&e.onClose()};return document.addEventListener("keydown",t),function(){return document.removeEventListener("keydown",t)}}),[e]),s.a.createPortal(Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:x()(ae.a.root,Object($.a)({},ae.a.root_open,e.open)),children:[Object(g.jsx)(Ye,{onClose:e.onClose}),Object(g.jsxs)("div",{id:e.id,className:ae.a.content,children:[Object(g.jsx)("button",{className:ae.a.closeButton,onClick:e.onClose,children:Object(g.jsx)(o.CloseIcon,{type:"primary"})}),e.children]})]})}),Qe)},Ke=n.p+"static/media/icon-accepted.7341dd32.svg",Ze=n(107),$e=n.n(Ze),et=function(e){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:$e.a.root,children:[Object(g.jsx)("h1",{className:x()("text text_type_digits-large pt-20 pb-8"),children:e.order.number}),Object(g.jsx)("p",{className:"text text_type_main-medium pb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(g.jsx)("img",{className:"pb-15",src:Ke,alt:"\u0418\u043a\u043e\u043d\u043a\u0430 \u0443\u0441\u043f\u0435\u0445\u0430"}),Object(g.jsx)("p",{className:"text text_type_main-default pb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(g.jsx)("p",{className:"text text_type_main-default pb-15 text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},tt={wsInit:"wsOrder/init",wsInitWithCustomUrl:"wsOrder/wsInitWithCustomUrl",wsSendMessage:"wsOrder/sendMessage",wsClose:"wsOrder/close",onOpen:"wsOrder/onOpen",onClose:"wsOrder/onClose",onError:"wsOrder/onError",onMessage:"wsOrder/onMessage"},nt={orders:void 0,total:void 0,totalToday:void 0},rt=Object(D.b)("updateOrders"),it=Object(D.d)(nt,(je={},Object($.a)(je,rt.type,(function(e,t){return e.orders=t.payload,e})),Object($.a)(je,tt.onMessage,(function(e,t){return t.payload})),Object($.a)(je,tt.onClose,(function(){return nt})),je)),ct=function(e){return e.wsOrders.orders},at=function(e){var t=e.wsOrders;return{total:t.total,totalToday:t.totalToday}},st=it,ot={orderDetails:{name:"",order:{number:-1},success:!1},activeOrder:void 0,orderDetailsLoading:!1,orderDetailsError:!1,isOrderPopupOpen:!1,orders:void 0,ordersLoading:!1},dt=Object(D.c)("order/postOrder",(function(e,t){return function(e,t){var n="".concat(L,"/orders");return fetch(n,{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return P(e)}))}({ingredients:e},t.getState().user.accessToken)})),lt=Object(D.c)("order/fetchOrders",function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState().user.accessToken,e.next=3,A(r);case 3:i=e.sent,n.dispatch(rt(i.orders));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ut=Object(D.e)({name:"order",initialState:ot,reducers:{openOrderPopup:function(e){e.isOrderPopupOpen=!0},closeOrderPopup:function(e){e.isOrderPopupOpen=!1}},extraReducers:function(e){e.addCase(dt.pending,(function(e){e.orderDetailsLoading=!0})),e.addCase(dt.fulfilled,(function(e,t){e.orderDetails=t.payload,e.orderDetailsLoading=!1,e.orderDetailsError=!1})),e.addCase(dt.rejected,(function(e){e.orderDetailsError=!0}))}}),jt=function(e){return e.order.orderDetails},pt=function(e){return e.order.orderDetailsLoading},bt=function(e){return e.order.isOrderPopupOpen},ft=ut.actions,mt=ut.reducer,xt=ft.openOrderPopup,_t=ft.closeOrderPopup,ht=mt,Ot=function(){var e=Object(b.g)(),t=T(),n=S(he),r=S(Oe),c=S(ge),a=S(jt),s=S(pt),d=S(bt),l=S(U),u=Object(Ge.a)({accept:"order-from-menu",collect:function(e){return{isHover:e.isOver()}},drop:function(e){t(ke(e.id))}}),j=Object(f.a)(u,2),p=j[0].isHover,m=j[1];return Object(g.jsxs)("section",{className:x()(He.a.root,"ml-10",Object($.a)({},He.a.root_over,p)),ref:m,children:[n&&Object(g.jsx)(Ue,Object(E.a)({bun:!0,position:"top"},n)),Object(g.jsx)("ul",{className:x()(He.a.list,"custom-scroll"),children:r.map((function(e){return Object(i.createElement)(Ue,Object(E.a)(Object(E.a)({},e),{},{key:e._id}))}))}),n&&Object(g.jsx)(Ue,Object(E.a)({bun:!0,position:"bottom"},n)),Object(g.jsx)("div",{style:{marginTop:"auto"},children:Object(g.jsxs)("div",{className:x()(He.a.results,"mt-10"),children:[Object(g.jsxs)("p",{className:x()(He.a.totalCost,"mr-10"),children:[Object(g.jsx)("span",{className:"text text_type_digits-medium mr-2",children:c}),Object(g.jsx)(o.CurrencyIcon,{type:"primary"})]}),Object(g.jsx)(o.Button,{type:"primary",size:"large",onClick:function(){if(n&&!s){if(!l)return e.push("/login");var i=[n].concat(Object(oe.a)(r)).map((function(e){return e._id}));t(dt(i)).then((function(){t(xt()),t(Ee())}))}},children:s?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})}),Object(g.jsx)(Ve,{open:d,onClose:function(){return t(_t())},children:Object(g.jsx)(et,Object(E.a)({},a))})]})},gt=n(15),yt=n.n(gt),vt=function(e){var t,n=Object(b.h)(),r=S((t=e._id,function(e){var n=e.ingredients.ingredients.find((function(e){return e._id===t}));if(!n)return 0;if(n.type===de){var r=e.ingredients.constructor.bun;return r&&r.id===t?r.qty:0}var i=e.ingredients.constructor.mains.find((function(e){return e.id===t}));return i?i.qty:0})),i=Object(Je.a)({type:"order-from-menu",item:{id:e._id}}),c=Object(f.a)(i,2)[1];return Object(g.jsx)(_.b,{className:yt.a.link,to:{pathname:"/ingredients/".concat(e._id),state:{background:n}},children:Object(g.jsxs)("div",{className:yt.a.burgerIngredient,ref:c,children:[r>0&&Object(g.jsx)(o.Counter,{count:r,size:"default"}),Object(g.jsx)("img",{className:"pr-4 pl-4 mb-1",src:e.image,alt:e.name}),Object(g.jsxs)("p",{className:yt.a.ingredientCost,children:[Object(g.jsx)("span",{className:"text text_type_digits-default mr-2",children:e.price})," ",Object(g.jsx)(o.CurrencyIcon,{type:"primary"})]}),Object(g.jsx)("h3",{className:x()(yt.a.ingredientTitle,"text text_type_main-default"),children:e.name})]})},e._id)},Nt=function(){var e,t=S(_e),n=Object(i.useState)(de),r=Object(f.a)(n,2),c=r[0],a=r[1],s={buns:(e=t).filter((function(e){return e.type===de})),mains:e.filter((function(e){return e.type===ue})),sauces:e.filter((function(e){return e.type===le}))},d=s.buns,l=s.mains,u=s.sauces,j=function(e){return a(e)},p=function(e){return Object(g.jsx)("li",{className:yt.a.ingredientsItem,children:Object(g.jsx)(vt,Object(E.a)({},e))},e._id)},b=Object(i.useState)([0,0,0]),m=Object(f.a)(b,2),_=m[0],h=m[1],O=Object(i.useState)(0),y=Object(f.a)(O,2),v=y[0],N=y[1],C=Object(i.useRef)(null),k=Object(i.useRef)(null);Object(i.useEffect)((function(){var e;N(Number(null===(e=C.current)||void 0===e?void 0:e.getBoundingClientRect().y));var t=document.querySelectorAll(".ing-type-header");k.current=Array.from(t),h(k.current.map((function(e){return e.getBoundingClientRect().y-v})))}),[v]),Object(i.useEffect)((function(){_[2]<0?a(ue):_[1]<0?a(le):_[0]<=0&&a(de)}),[_]);return Object(g.jsxs)("section",{className:yt.a.root,children:[Object(g.jsx)("h1",{className:x()(yt.a.title,"text text_type_main-large"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(g.jsxs)("div",{className:"mb-10",style:{display:"flex"},children:[Object(g.jsx)("a",{className:yt.a.tabLink,href:"#".concat(de),children:Object(g.jsx)(o.Tab,{value:de,active:c===de,onClick:j,children:"\u0411\u0443\u043b\u043a\u0438"})}),Object(g.jsx)("a",{className:yt.a.tabLink,href:"#".concat(le),children:Object(g.jsx)(o.Tab,{value:le,active:c===le,onClick:j,children:"\u0421\u043e\u0443\u0441\u044b"})}),Object(g.jsx)("a",{className:yt.a.tabLink,href:"#".concat(ue),children:Object(g.jsx)(o.Tab,{value:ue,active:c===ue,onClick:j,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]}),Object(g.jsxs)("div",{className:x()(yt.a.ingredientsContainer,"custom-scroll"),onScroll:function(){h(k.current.map((function(e){return e.getBoundingClientRect().y-v})))},ref:C,children:[Object(g.jsx)("h2",{id:de,className:"ing-type-header text text_type_main-medium mb-6",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(g.jsx)("ul",{className:yt.a.ingredientsList,children:d.map(p)}),Object(g.jsx)("h2",{id:le,className:"ing-type-header text text_type_main-medium mb-6",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(g.jsx)("ul",{className:yt.a.ingredientsList,children:u.map(p)}),Object(g.jsx)("h2",{id:ue,className:"ing-type-header text text_type_main-medium mb-6",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(g.jsx)("ul",{className:yt.a.ingredientsList,children:l.map(p)})]})]})},Ct=function(){return Object(g.jsx)(Re.a,{backend:Fe.a,children:Object(g.jsx)(re,{className:qe.a.root,children:Object(g.jsxs)("div",{className:qe.a.burgerContainer,children:[Object(g.jsx)(Nt,{}),Object(g.jsx)(Ot,{})]})})})},kt=function(){return Object(g.jsx)(re,{children:"NotFound"})},wt=n(80),It=n.n(wt),Tt=function(){var e=T(),t=S(z),n=Object(i.useState)(t.name),r=Object(f.a)(n,2),c=r[0],a=r[1],s=Object(i.useState)(t.email),d=Object(f.a)(s,2),l=d[0],u=d[1],j=Object(i.useMemo)((function(){return c!==t.name||l!==t.email}),[t,c,l]);return Object(g.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(J({name:c,email:l}))},className:It.a.form,children:[Object(g.jsx)(v,{children:Object(g.jsx)(o.Input,{name:"name",type:"text",value:c,onChange:function(e){return a(e.target.value)},icon:"EditIcon",placeholder:"\u0418\u043c\u044f"})}),Object(g.jsx)(v,{children:Object(g.jsx)(o.Input,{name:"login",type:"text",value:l,onChange:function(e){return u(e.target.value)},icon:"EditIcon",placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(g.jsx)(v,{children:Object(g.jsx)(o.Input,{name:"password",type:"password",value:"password",onChange:function(){},icon:"EditIcon",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",disabled:!0})}),j&&Object(g.jsxs)("div",{className:It.a.buttons,children:[Object(g.jsx)(o.Button,{type:"secondary",size:"medium",onClick:function(){a(t.name),u(t.email)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(g.jsx)(o.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},St=n(31),Et=n.n(St),Dt=function(){var e=Object(b.g)(),t=T();return Object(g.jsxs)("aside",{className:Et.a.root,children:[Object(g.jsxs)("ul",{className:Et.a.tabs,children:[Object(g.jsx)("li",{children:Object(g.jsx)(_.b,{className:x()("text text_type_main-medium pt-4 pb-4",Et.a.link,Object($.a)({},Et.a.link_active,"/profile"===e.location.pathname)),to:"/profile",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(g.jsx)("li",{children:Object(g.jsx)(_.b,{className:x()(Et.a.link,"text text_type_main-medium pt-4 pb-4",Object($.a)({},Et.a.link_active,"/profile/orders"===e.location.pathname)),to:"/profile/orders",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(g.jsx)("li",{children:Object(g.jsx)("button",{onClick:function(){return t(q())},className:x()(Et.a.button,"text text_type_main-medium text_color_inactive pt-4 pb-4"),children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},Lt={width:"100%",maxWidth:1280,padding:"0 40px",display:"flex",margin:"120px auto 0"},Pt=function(){return Object(g.jsx)(re,{children:Object(g.jsxs)("div",{style:Lt,children:[Object(g.jsx)(Dt,{}),Object(g.jsx)(Tt,{})]})})},At=function(){var e=T(),t=Object(b.g)(),n=c.a.useState(""),r=Object(f.a)(n,2),i=r[0],a=r[1],s=c.a.useState(""),d=Object(f.a)(s,2),j=d[0],p=d[1],m=c.a.useState(""),x=Object(f.a)(m,2),_=x[0],h=x[1],O=function(){var n=Object(u.a)(l.a.mark((function n(r){var c,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),c={name:i,email:j,password:_},n.next=4,e(F(c));case 4:a=n.sent,F.fulfilled.match(a)&&t.replace("/");case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(g.jsx)(re,{children:Object(g.jsxs)(w,{onSubmit:O,children:[Object(g.jsx)(C,{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(g.jsx)(v,{children:Object(g.jsx)(o.Input,{name:"name",value:i,onChange:function(e){return a(e.target.value)},type:"text",placeholder:"\u0418\u043c\u044f",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(g.jsx)(v,{children:Object(g.jsx)(o.Input,{name:"email",value:j,onChange:function(e){return p(e.target.value)},type:"text",placeholder:"E-mail",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(g.jsx)(v,{children:Object(g.jsx)(o.PasswordInput,{name:"password",value:_,onChange:function(e){return h(e.target.value)}})}),Object(g.jsx)(N,{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(g.jsx)(y,{linkHref:"/login",linkTitle:"\u0412\u043e\u0439\u0442\u0438",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"})]})})},Bt=function(){var e=c.a.useState(""),t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(g.jsx)(re,{children:Object(g.jsxs)(w,{children:[Object(g.jsx)(C,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(g.jsx)(v,{children:Object(g.jsx)(o.PasswordInput,{name:"password",value:n,onChange:function(e){return r(e.target.value)}})}),Object(g.jsx)(v,{children:Object(g.jsx)(o.Input,{name:"code",value:n,onChange:function(e){return r(e.target.value)},type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(g.jsx)(N,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(g.jsx)(y,{linkHref:"/login",linkTitle:"\u0412\u043e\u0439\u0442\u0438",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})]})})},Rt=n(55),Ft=["isAllowed","redirectionPath"],Wt=function(e){var t,n=e.isAllowed,r=e.redirectionPath,i=Object(Rt.a)(e,Ft),c=Object(b.g)();if(n)return Object(g.jsx)(b.b,Object(E.a)({},i));var a=null===(t=c.location.state)||void 0===t?void 0:t.from;return Object(g.jsx)(b.a,{to:{pathname:a||r,state:{from:c.location.pathname}}})},qt=n(81),Mt=n.n(qt),Ht=n(48),Jt=n.n(Ht),Gt=function(e){var t=e.src,n=e.renderDiv,r=void 0!==n&&n,i=e.style;return r?Object(g.jsx)("div",{style:i,className:Jt.a.ingredient,children:Object(g.jsx)("img",{className:Jt.a.ingredientImage,src:t,alt:"\u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442"})}):Object(g.jsx)("li",{style:i,className:Jt.a.ingredient,children:Object(g.jsx)("img",{className:Jt.a.ingredientImage,src:t,alt:"\u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442"})})},Ut=n(29),zt=n.n(Ut),Xt=function(e){var t=p()(e);return p()().startOf("day").isSame(t,"day")?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, "+t.format("kk:mm"):p()().subtract(1,"day").isSame(t,"day")?"\u0412\u0447\u0435\u0440\u0430, "+t.format("kk:mm"):t.format("DD:MM, kk:mm")},Yt=function(e){var t=e.data,n=Object(b.h)();return Object(g.jsx)("li",{className:zt.a.cardContainer,children:Object(g.jsxs)(_.b,{to:{pathname:"feed/".concat(t._id),state:{background:n}},className:zt.a.card,children:[Object(g.jsxs)("p",{className:x()(zt.a.header,"text text_type_digits-default"),children:["#",t.number," ",Object(g.jsxs)("time",{className:"text text_type_main-default text_color_inactive",children:[Xt(t.createdAt)," i-GMT+3"]})]}),Object(g.jsx)("h2",{className:x()(zt.a.title,"text text_type_main-medium"),children:t.name}),Object(g.jsxs)("div",{className:zt.a.priceInfo,children:[t.modifiedIngredients&&Object(g.jsx)("ul",{className:zt.a.ingredientsList,children:t.modifiedIngredients.slice(0,5).reverse().map((function(e,n){return Object(g.jsx)(Gt,{src:e.img},"".concat(e.id,"-").concat(t._id,"-").concat(n))}))}),Object(g.jsxs)("p",{className:x()(zt.a.priceContainer),children:[Object(g.jsx)("span",{className:x()(zt.a.price,"text text_type_digits-default"),children:t.price?t.price:"\u2013"}),Object(g.jsx)(o.CurrencyIcon,{type:"primary"})]})]})]})})},Qt=function(e){var t=e.data;return Object(g.jsx)("div",{className:Mt.a.orders,children:Object(g.jsx)("ul",{className:x()(Mt.a.list,"custom-scroll"),children:t.map((function(e){return Object(g.jsx)(Yt,{data:e},e._id)}))})})},Vt=n(19),Kt=n.n(Vt),Zt=n(32),$t=n.n(Zt),en=function(){var e=T(),t=S(ct),n=S(_e),r=Object(i.useMemo)((function(){return null===t||void 0===t?void 0:t.some((function(e){return e.price}))}),[t]);Object(i.useEffect)((function(){if(n&&t){var r=t.map((function(e){var t=0,r=e.ingredients.reduce((function(e,r){var i=n.find((function(e){return e._id===r}));if(!i)return[].concat(Object(oe.a)(e),[{id:r,img:"",name:"",price:0,qty:0}]);var c=i.type===de;t+=i.price,c&&(t+=i.price);var a=e.findIndex((function(e){return e.id===i._id}));if(-1!==a)return e[a].qty+=1,e;var s=c?2:1;return[].concat(Object(oe.a)(e),[{id:r,img:i.image_mobile,name:i.name,price:i.price,qty:s}])}),[]);return Object(E.a)(Object(E.a)({},e),{},{price:t,modifiedIngredients:r})}));e(rt(r))}}),[r])},tn="pending",nn="done",rn={PENDING:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",DONE:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"},cn=function(e){var t,n=e.style,r=T(),c=Object(b.i)().id,a=S(function(e){return function(t){var n;return null===(n=t.wsOrders.orders)||void 0===n?void 0:n.find((function(t){return t._id===e}))}}(c));if(Object(i.useEffect)((function(){a||r(lt())}),[a]),en(),!a)return null;var s=a.status.toUpperCase();return Object(g.jsxs)("div",{style:n,className:$t.a.root,children:[Object(g.jsxs)("p",{className:"text text_type_digits-default mb-10",style:{textAlign:"center"},children:["#",a.number]}),Object(g.jsx)("h1",{className:"text text_type_main-medium mb-3",children:a.name}),Object(g.jsx)("p",{className:"text text_type_main-default mb-15",children:rn[s]}),Object(g.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(g.jsx)("ul",{className:x()($t.a.list,"custom-scroll mb-10"),children:null===(t=a.modifiedIngredients)||void 0===t?void 0:t.map((function(e,t){return Object(g.jsxs)("li",{className:$t.a.ingredient,children:[Object(g.jsx)(Gt,{style:{margin:0},src:e.img,renderDiv:!0},"".concat(e.id,"-").concat(a._id,"-").concat(t)),Object(g.jsx)("p",{className:x()($t.a.title,"text text_type_main-default ml-4 mr-4"),children:e.name}),Object(g.jsxs)("p",{className:$t.a.priceContainer,children:[Object(g.jsxs)("span",{className:"text text_type_main-default mr-2",children:[e.qty," x ",e.price]})," ",Object(g.jsx)(o.CurrencyIcon,{type:"primary"})]})]},e.id)}))}),Object(g.jsxs)("div",{className:$t.a.info,children:[Object(g.jsx)("time",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0447\u0435\u0440\u0430, 13:50 i-GMT+3"}),Object(g.jsxs)("div",{style:{marginLeft:"auto"},className:$t.a.priceContainer,children:[Object(g.jsx)("span",{className:"text text_type_main-default mr-2",children:a.price})," ",Object(g.jsx)(o.CurrencyIcon,{type:"primary"})]})]})]})},an=function(e){var t=e.data,n=S(ct),r=Object(i.useMemo)((function(){return null===n||void 0===n?void 0:n.filter((function(e){return e.status===tn})).map((function(e){return e.number}))}),[n]),c=Object(i.useMemo)((function(){return null===n||void 0===n?void 0:n.filter((function(e){return e.status===nn})).map((function(e){return e.number}))}),[n]);return Object(g.jsxs)("div",{className:Kt.a.stats,children:[Object(g.jsxs)("div",{className:Kt.a.ordersStatuses,children:[Object(g.jsxs)("div",{className:Kt.a.ordersStatus,children:[Object(g.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(g.jsx)("ul",{className:Kt.a.idsList,children:null===c||void 0===c?void 0:c.slice(0,10).map((function(e){return Object(g.jsx)("li",{className:x()(Kt.a.orderId,Kt.a.orderId_highlight,"text text_type_digits-default"),children:e},e)}))})]}),Object(g.jsxs)("div",{className:Kt.a.ordersStatus,children:[Object(g.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(g.jsx)("ul",{className:Kt.a.idsList,children:null===r||void 0===r?void 0:r.slice(0,10).map((function(e){return Object(g.jsx)("li",{className:x()(Kt.a.orderId,"text text_type_digits-default"),children:e},e)}))})]})]}),Object(g.jsxs)("div",{className:Kt.a.globalStats,children:[Object(g.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(g.jsx)("span",{className:x()(Kt.a.stat,"text text_type_digits-large"),children:void 0===t.total?"\u2013":t.total})]}),Object(g.jsxs)("div",{className:Kt.a.globalStats,children:[Object(g.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(g.jsx)("span",{className:x()(Kt.a.stat,"text text_type_digits-large"),children:void 0===t.totalToday?"\u2013":t.totalToday})]})]})},sn=n(82),on=n.n(sn),dn=function(){var e=T(),t=S(ct),n=S(at);return Object(i.useEffect)((function(){return e({type:tt.wsInit}),function(){e({type:tt.wsClose})}}),[]),en(),Object(g.jsx)(re,{children:Object(g.jsxs)("div",{className:on.a.root,children:[Object(g.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(g.jsxs)("div",{className:on.a.content,children:[t?Object(g.jsx)(Qt,{data:t}):Object(g.jsx)("div",{style:{width:"100%",minWidth:604}}),Object(g.jsx)(an,{data:n})]})]})})},ln=n(83),un=n.n(ln),jn=n(36),pn=n.n(jn),bn=function(e){var t,n=e.data,r=Object(b.h)(),i=n.status.toUpperCase();return Object(g.jsx)("li",{className:pn.a.orderContainer,children:Object(g.jsxs)(_.b,{className:pn.a.order,to:{pathname:"orders/".concat(n._id),state:{background:r}},children:[Object(g.jsxs)("p",{className:pn.a.header,children:[Object(g.jsxs)("span",{className:"text text_type_digits-default",children:["#",n.number]}),Object(g.jsxs)("time",{className:"text text_type_main-default text_color_inactive",children:[Xt(n.createdAt)," i-GMT+3"]})]}),Object(g.jsx)("p",{className:"text text_type_main-medium mb-2",children:n.name}),Object(g.jsx)("p",{className:"text text_type_main-default mb-6",children:rn[i]}),Object(g.jsxs)("div",{className:pn.a.ingredientsContainer,children:[Object(g.jsx)("ul",{className:pn.a.ingredientsList,children:null===(t=n.modifiedIngredients)||void 0===t?void 0:t.slice(0,5).map((function(e,t){return Object(g.jsx)(Gt,{src:e.img},"".concat(e.id,"-").concat(n._id,"-").concat(t))}))}),Object(g.jsxs)("p",{className:x()(pn.a.priceContainer),children:[Object(g.jsx)("span",{className:"text text_type_digits-default mr-2",children:n.price}),Object(g.jsx)(o.CurrencyIcon,{type:"primary"})]})]})]})})},fn={maxWidth:1280,padding:"0 40px",display:"flex",margin:"120px auto 0"},mn=function(){var e=T(),t=S(U),n=S(ct),r=S(Y);return en(),Object(i.useEffect)((function(){return t&&e({type:tt.wsInitWithCustomUrl,payload:"wss://norma.nomoreparties.space/orders?token=".concat(r)}),function(){e({type:tt.wsClose})}}),[t]),Object(g.jsx)(re,{children:Object(g.jsxs)("div",{style:fn,children:[Object(g.jsx)(Dt,{}),Object(g.jsx)("div",{className:un.a.root,children:n&&Object(g.jsx)("ul",{className:x()(un.a.list,"custom-scroll"),children:n.slice().reverse().map((function(e){return Object(g.jsx)(bn,{data:e},e._id)}))})})]})})},xn=n(108),_n=n.n(xn);p.a.extend(_n.a);var hn=function(){var e=Object(b.g)(),t=Object(b.h)(),n=T(),r=S(U),c=S(X),a=t.state&&t.state.background,s=Object(i.useCallback)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(R());case 2:n(H());case 3:case"end":return e.stop()}}),e)}))),[n]);Object(i.useEffect)((function(){s()}),[s]),Object(i.useEffect)((function(){n(me())}),[]);var o=function(t){e.push(t)};return Object(g.jsxs)("div",{children:[Object(g.jsxs)(b.d,{location:a||t,children:[Object(g.jsx)(Wt,{path:"/login",exact:!0,isAllowed:!r,redirectionPath:"/",children:Object(g.jsx)(Be,{})}),Object(g.jsx)(Wt,{path:"/register",exact:!0,isAllowed:!r,redirectionPath:"/",children:Object(g.jsx)(At,{})}),Object(g.jsx)(Wt,{path:"/forgot-password",exact:!0,isAllowed:!r,redirectionPath:"/",children:Object(g.jsx)(ie,{})}),Object(g.jsx)(Wt,{path:"/reset-password",exact:!0,isAllowed:c,redirectionPath:"/",children:Object(g.jsx)(Bt,{})}),Object(g.jsx)(b.b,{exact:!0,path:"/",children:Object(g.jsx)(Ct,{})}),Object(g.jsx)(b.b,{path:"/ingredients/:id",children:Object(g.jsx)(Ae,{})}),Object(g.jsx)(Wt,{path:"/profile",exact:!0,redirectionPath:"/login",isAllowed:r,children:Object(g.jsx)(Pt,{})}),Object(g.jsx)(Wt,{path:"/profile/orders",exact:!0,redirectionPath:"/login",isAllowed:r,children:Object(g.jsx)(mn,{})}),Object(g.jsx)(Wt,{path:"/profile/orders/:id",exact:!0,redirectionPath:"/login",isAllowed:r,children:Object(g.jsx)(re,{children:Object(g.jsx)(cn,{})})}),Object(g.jsx)(b.b,{path:"/feed",exact:!0,children:Object(g.jsx)(dn,{})}),Object(g.jsx)(b.b,{path:"/feed/:id",exact:!0,children:Object(g.jsx)(re,{children:Object(g.jsx)(cn,{})})}),Object(g.jsx)(b.b,{children:Object(g.jsx)(kt,{})})]}),a&&Object(g.jsx)(b.b,{path:"/profile/orders/:id",children:Object(g.jsx)(Ve,{open:!0,onClose:function(){return o("/profile/orders")},children:Object(g.jsx)(cn,{style:{marginTop:0,minWidth:640}})})}),a&&Object(g.jsx)(b.b,{path:"/feed/:id",children:Object(g.jsx)(Ve,{open:!0,onClose:function(){return o("/feed")},children:Object(g.jsx)(cn,{style:{marginTop:0,minWidth:640}})})}),a&&Object(g.jsx)(b.b,{path:"/ingredients/:id",children:Object(g.jsx)(Ve,{id:"ingredientModal",open:!0,onClose:function(){return o("/")},children:Object(g.jsx)(Le,{})})})]})},On=["success"],gn=n(109),yn=n.n(gn),vn=Object(D.a)({reducer:{ingredients:De,order:ht,user:Z,wsOrders:st},middleware:function(e){return e().concat((t="wss://norma.nomoreparties.space/orders/all",n=tt,function(e){var r=null;return function(i){return function(c){var a=e.dispatch,s=(0,e.getState)().user.accessToken,o=c.type,d=c.payload,l=n.wsInit,u=n.wsInitWithCustomUrl,j=n.wsSendMessage,p=n.wsClose,b=n.onOpen,f=n.onClose,m=n.onError,x=n.onMessage;if(o===l&&(r=new WebSocket(t)),o===u&&(r=new WebSocket(d)),r){if(r.onopen=function(){a({type:b})},r.onerror=function(){a({type:m})},r.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(Rt.a)(n,On));a({type:x,payload:r})},r.onclose=function(){a({type:f})},o===j){var _=Object(E.a)(Object(E.a)({},d),{},{token:s});r.send(JSON.stringify(_))}o===p&&r.close()}i(c)}}}),yn.a);var t,n}});n(197);s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(I.a,{store:vn,children:Object(g.jsx)(_.a,{children:Object(g.jsx)(hn,{})})})}),document.getElementById("root"))},22:function(e,t,n){e.exports={root:"burger-constructor_root__1kSmR pt-25",root_over:"burger-constructor_root_over__kCE8-",list:"burger-constructor_list__2lXaw",item:"burger-constructor_item__9YfeG",listItem:"burger-constructor_listItem__3T5pd",ingredientContainer:"burger-constructor_ingredientContainer__29Dsf",ingredientContainer_outter:"burger-constructor_ingredientContainer_outter__1WLTE",button:"burger-constructor_button__3bxLu",results:"burger-constructor_results__3sY99",totalCost:"burger-constructor_totalCost__1Bs-S"}},25:function(e,t,n){e.exports={root:"app-header_root__1LpUj",container:"app-header_container__2ER_-",linksContainer:"app-header_linksContainer__3HHtP",logo:"app-header_logo__zVEfY",link:"app-header_link__2y8TU pr-5 pl-5 pt-4 pb-4 mr-2",link_active:"app-header_link_active__vLEYL",link_right:"app-header_link_right__23rsB"}},27:function(e,t,n){e.exports={form:"form_form__1Ljzh",title:"form_title__7AGX4",inputContainer:"form_inputContainer__362H3",buttonWrapper:"form_buttonWrapper__ewnap",hint:"form_hint__3dWAK",hintLink:"form_hintLink__136bT"}},29:function(e,t,n){e.exports={card:"feed-card_card__2oJ5K",cardContainer:"feed-card_cardContainer__1x9F3",header:"feed-card_header__1lTkG",title:"feed-card_title__1ywF-",priceInfo:"feed-card_priceInfo__1GpWA",ingredientsList:"feed-card_ingredientsList__XnAu_",overlay:"feed-card_overlay__2kgRk",priceContainer:"feed-card_priceContainer__3gH11",price:"feed-card_price__3ve4J"}},31:function(e,t,n){e.exports={root:"profile-sidebar_root__2pbrR",tabs:"profile-sidebar_tabs__3CQUg",text:"profile-sidebar_text__1hG_9",link:"profile-sidebar_link__4CgBC text_color_inactive",link_active:"profile-sidebar_link_active__VQQ5w",button:"profile-sidebar_button__1Uuqy"}},32:function(e,t,n){e.exports={root:"order-details_root__2_5o7",list:"order-details_list__3ux2F",ingredient:"order-details_ingredient__3ci9V",title:"order-details_title__a8VFk",priceContainer:"order-details_priceContainer__4LX12",info:"order-details_info__1YX30"}},36:function(e,t,n){e.exports={order:"order_order__1OifF",orderContainer:"order_orderContainer__25JkA",header:"order_header__2FaG5",ingredientsContainer:"order_ingredientsContainer__mSlT3",ingredientsList:"order_ingredientsList__JuXvK",priceContainer:"order_priceContainer__2cHpE"}},48:function(e,t,n){e.exports={ingredient:"ingredient-image_ingredient__6JHKr",ingredientImage:"ingredient-image_ingredientImage__3p1t9"}},77:function(e,t,n){e.exports={root:"app_root__2y0JE",burgerContainer:"app_burgerContainer__13Y3H pl-5 pr-5 pb-10"}},80:function(e,t,n){e.exports={form:"edit-profile_form__lDfbu",buttons:"edit-profile_buttons__nf1h2"}},81:function(e,t,n){e.exports={orders:"orders_orders__1LFuS",list:"orders_list__2cQbh"}},82:function(e,t,n){e.exports={root:"orders-feed_root__2xjai",content:"orders-feed_content__16me2"}},83:function(e,t,n){e.exports={root:"orders-list_root__31Tey",list:"orders-list_list__2WJgy"}}},[[198,1,2]]]);
//# sourceMappingURL=main.52b11e8d.chunk.js.map