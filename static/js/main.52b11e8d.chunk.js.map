{"version":3,"sources":["components/modal/modal.module.css","components/modal-overlay/modal-overlay.module.css","components/order-details/order-details.module.css","components/burger-ingredients/burger-ingredients.module.css","pages/orders-feed/components/stats/stats.module.css","components/app/app.typed.ts","components/form/components/hint.tsx","components/form/components/input-container.tsx","components/form/components/submit.tsx","components/form/components/title.tsx","components/form/form.tsx","components/form/index.ts","services/hooks.ts","utils/api.ts","services/slices/user.ts","components/app-header/app-header.tsx","components/layout/layout.tsx","pages/forgot-password/forgot-password.tsx","components/ingredient-details/components/nutrition-facts/nutrition-facts.tsx","services/slices/ingredients.ts","components/ingredient-details/ingredient-details.tsx","pages/ingredient/ingredient.tsx","pages/login/login.tsx","components/burger-constructor/components/ingredient/ingredient.tsx","components/burger-constructor/components/ingredient/ingredient.utils.ts","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/icon-accepted.svg","components/order-details/order-details.tsx","services/slices/ws-orders.ts","services/slices/order.ts","components/burger-constructor/burger-constructor.tsx","components/burger-ingredients/components/ingredient/ingredient.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-ingredients/burger-ingredients.utils.ts","pages/main/main.tsx","pages/not-found/not-found.tsx","components/edit-profile/edit-profile.tsx","components/profile-sidebar/profile-sidebar.tsx","pages/profile/profile.tsx","pages/register/register.tsx","pages/reset-password/reset-password.tsx","components/protected-route/protected-route.tsx","components/feed-card/components/ingredient-image/ingredient-image.tsx","components/feed-card/feed-card.tsx","pages/orders-feed/components/orders/orders.tsx","hooks/useModifyOrders.ts","pages/order-details/order-details.tsx","pages/orders-feed/components/stats/stats.tsx","pages/orders-feed/orders-feed.tsx","pages/orders-list/components/order/order.tsx","pages/orders-list/orders-list.tsx","components/app/app.tsx","services/store.ts","middleware/socket-middleware.ts","index.tsx","components/burger-constructor/burger-constructor.module.css","components/app-header/app-header.module.css","components/form/form.module.css","components/feed-card/feed-card.module.css","components/profile-sidebar/profile-sidebar.module.css","pages/order-details/order-details.module.css","pages/orders-list/components/order/order.module.css","components/feed-card/components/ingredient-image/ingredient-image.module.css","components/app/app.module.css","components/edit-profile/edit-profile.module.css","pages/orders-feed/components/orders/orders.module.css","pages/orders-feed/orders-feed.module.css","pages/orders-list/orders-list.module.css"],"names":["module","exports","ActionType","Hint","props","className","cn","styles","hint","children","to","linkHref","hintLink","linkTitle","InputContainer","inputContainer","Submit","buttonWrapper","type","size","Title","title","Form","onSubmit","form","useAppDispatch","useDispatch","useAppSelector","useSelector","API_URL","getResponseData","res","a","ok","json","message","Promise","reject","Error","status","fetchOrders","token","url","fetch","headers","Authorization","then","initialState","accessToken","isAuthenticated","user","name","email","loading","error","canResetPassword","refreshToken","createAsyncThunk","localStorage","getItem","method","body","JSON","stringify","data","setItem","split","register","api","catch","login","logout","removeItem","forgotPassword","getUser","_","thunkAPI","getState","err","dispatch","resultAction","fulfilled","match","rejectWithValue","patchUser","createSlice","reducers","allowPasswordReset","state","restrictPasswordReset","extraReducers","builder","addCase","pending","action","payload","rejected","selectIsAuthenticated","selectUser","selectCanResetPassword","selectAccessToken","actions","reducer","AppHeader","history","useHistory","pathname","useMemo","location","root","container","linksContainer","logo","link","link_active","link_right","Layout","ForgotPassword","React","useState","setEmail","handleSubmit","evt","preventDefault","replace","value","onChange","e","target","placeholder","errorText","NutritionFacts","nutritionFacts","nutritionFact","nutritionFact_size_l","nutritionText","calories","proteins","fat","carbohydrates","IngredientType","initialConstructorState","bun","mains","price","ingredients","ingredientsLoading","ingredientsError","activeIngredientId","isDetailsPopupOpen","constructor","dragging","countPrice","ingredientsToCount","push","reduce","acc","item","ingredient","find","i","_id","id","qty","fetchIngredients","openDetailsPopup","setActiveIngredient","resetActiveIngredient","closeDetailsPopup","addIngredient","findIndex","map","deleteIngredient","deletingIngredientIndex","deletingIngredient","filter","setDragging","swapIngredients","draggingIndex","ing","hoveredIndex","temp","clearConstructor","selectIngredients","selectBun","count","selectMains","main","foundIngredient","selectPrice","selectIngredientsLoading","IngredientDetails","params","useParams","style","textAlign","image","src","image_large","alt","CONTAINER_STYLE","display","alignItems","justifyContent","marginTop","Ingredient","length","Login","password","setPassword","cb","containerRef","useRef","onClick","current","deleteButtonElement","querySelector","targetElement","contains","useOnIngredientClick","useDrag","collect","monitor","opacity","isDragging","ref","useDrop","accept","isHover","isOver","drop","dropTarget","useEffect","position","ingredientContainer","ingredientContainer_outter","isLocked","text","thumbnail","listItem","button","handleClose","ModalOverlay","overlayRef","onClose","modalRoot","document","getElementById","Modal","onEscKeydown","key","addEventListener","removeEventListener","ReactDOM","createPortal","root_open","open","content","closeButton","OrderDetails","order","number","iconAccepted","WS_ORDER_ACTIONS","wsInit","wsInitWithCustomUrl","wsSendMessage","wsClose","onOpen","onError","onMessage","orders","undefined","total","totalToday","updateOrders","createAction","wsOrdersReducer","createReducer","selectOrders","wsOrders","selectStats","orderDetails","success","activeOrder","orderDetailsLoading","orderDetailsError","isOrderPopupOpen","ordersLoading","postOrderThunk","postOrder","fetchOrdersThunk","openOrderPopup","closeOrderPopup","selectOrderDetails","selectOrderLoading","selectIsOrderPopupOpen","BurgerConstructor","orderLoading","root_over","list","results","totalCost","ingredientsIds","useLocation","ingredientCount","background","burgerIngredient","ingredientCost","ingredientTitle","BurgerIngredients","setCurrent","buns","sauces","onTabClick","renderIngredient","ingredientsItem","headersScroll","setHeadersScroll","offsetTop","setOffsetTop","tabsRef","headersRef","Number","getBoundingClientRect","y","headerElements","querySelectorAll","Array","from","elem","tabLink","href","active","ingredientsContainer","onScroll","ingredientsList","Main","DndProvider","backend","HTML5Backend","burgerContainer","NotFound","EditProfile","setName","shouldShowButtons","icon","disabled","buttons","ProfileSidebar","tabs","width","maxWidth","padding","margin","Profile","Register","ResetPassword","setValue","ProtectedRoute","isAllowed","redirectionPath","routeProps","dynamicRedirectionPath","IngredientImage","renderDiv","ingredientImage","formatDate","utc","date","dayjs","startOf","isSame","format","subtract","FeedCard","cardContainer","card","header","createdAt","priceInfo","modifiedIngredients","slice","reverse","img","priceContainer","Orders","o","useModifyOrders","shouldAddPrice","some","updatedOrders","orderPrice","ingredientId","targetIngredient","isBun","foundIngredientInAccIdx","image_mobile","OrderReadyStatus","OrderStatusOutput","PENDING","DONE","ordersFromSockets","selectOrderById","orderStatus","toUpperCase","info","marginLeft","Stats","pendingOrders","doneOrders","stats","ordersStatuses","ordersStatus","idsList","orderId","orderId_highlight","globalStats","stat","OrdersFeed","minWidth","Order","orderContainer","OrdersList","extend","AdvancedFormat","App","handleLoad","useCallback","onModalClose","path","exact","store","configureStore","ingredientsReducer","orderReducer","userReducer","wsOrderReducer","middleware","getDefaultMiddleware","concat","wsUrl","wsActions","socket","next","WebSocket","onopen","onerror","onmessage","event","parsedData","parse","restParsedData","onclose","send","close","logger","render","StrictMode"],"mappings":"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","file":"static/js/main.52b11e8d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modal_root__QSEqe\",\"root_open\":\"modal_root_open__1wBPy\",\"content\":\"modal_content__1tQ-X\",\"closeButton\":\"modal_closeButton__2SoUT\",\"image\":\"modal_image__nuFwr\",\"title\":\"modal_title__1efUU\",\"nutritionFacts\":\"modal_nutritionFacts__1W4Tf\",\"nutritionFact\":\"modal_nutritionFact__1COEE\",\"nutritionFact_size_l\":\"modal_nutritionFact_size_l__2YrG_\",\"nutritionText\":\"modal_nutritionText__11aab\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modal-overlay_root__3Bmoz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"order-details_root__2yQn2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"burger-ingredients_root__BqyBa pt-10\",\"ingredientsContainer\":\"burger-ingredients_ingredientsContainer__2Y7_F\",\"title\":\"burger-ingredients_title__32v1n mb-5\",\"ingredientsList\":\"burger-ingredients_ingredientsList__1hPvZ pl-4 pr-4\",\"link\":\"burger-ingredients_link__2-zFo\",\"burgerIngredient\":\"burger-ingredients_burgerIngredient__1tjtK\",\"ingredientCost\":\"burger-ingredients_ingredientCost__2NLOC\",\"ingredientTitle\":\"burger-ingredients_ingredientTitle__25WRr\",\"tabLink\":\"burger-ingredients_tabLink__3h-uF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stats\":\"stats_stats__3a6_C\",\"ordersStatuses\":\"stats_ordersStatuses__1tphG\",\"idsList\":\"stats_idsList__3T_X3\",\"orderId\":\"stats_orderId__UF0E5\",\"orderId_highlight\":\"stats_orderId_highlight__gg-hS\",\"globalStats\":\"stats_globalStats__3kqGZ\",\"stat\":\"stats_stat__3B5uu\"};","export type TIngredient = {\n  _id: string;\n  name: string;\n  type: string;\n  proteins: number;\n  fat: number;\n  carbohydrates: number;\n  calories: number;\n  price: number;\n  image: string;\n  image_mobile: string;\n  image_large: string;\n  __v: number;\n};\n\nexport type TIngredientWithCount = TIngredient & { count: number };\n\nexport const IngredientType = {\n  BUN: \"bun\",\n  SAUCE: \"sauce\",\n  MAIN: \"main\",\n};\n\nexport enum ActionType {\n  ADD_BUN,\n  ADD_INGREDIENT,\n  DELETE_INGREDIENT,\n}\n\nexport interface IConstructorState {\n  bun: null | TIngredientWithCount;\n  mains: TIngredientWithCount[];\n  price: number;\n}\n\nexport type IAction = {\n  type: ActionType;\n  payload?: any;\n};\n","import cn from \"classnames\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"../form.module.css\";\n\ninterface IHint {\n  children: string;\n  linkHref: string;\n  linkTitle: string;\n}\n\nconst Hint: React.FC<IHint> = (props) => {\n  return (\n    <p\n      className={cn(\n        styles.hint,\n        \"text text_type_main-default text_color_inactive\"\n      )}\n    >\n      {props.children}{\" \"}\n      <Link\n        to={props.linkHref}\n        className={cn(styles.hintLink, \"text text_type_main-default\")}\n      >\n        {props.linkTitle}\n      </Link>\n    </p>\n  );\n};\n\nexport { Hint };\n","import cn from \"classnames\";\nimport React from \"react\";\nimport styles from \"../form.module.css\";\n\ninterface IInputContainer {\n  children: React.ReactNode;\n}\n\nconst InputContainer = (props: IInputContainer) => {\n  return (\n    <div className={cn(styles.inputContainer, \"mb-6\")}>{props.children}</div>\n  );\n};\n\nexport { InputContainer };\n","import { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport cn from \"classnames\";\nimport React from \"react\";\nimport styles from \"../form.module.css\";\n\ninterface ISubmit {\n  children: React.ReactNode;\n}\n\nconst Submit = ({ children }: ISubmit) => {\n  return (\n    <div className={cn(styles.buttonWrapper, \"mb-20\")}>\n      <Button type=\"primary\" size=\"medium\">\n        {children}\n      </Button>\n    </div>\n  );\n};\n\nexport { Submit };\n","import cn from \"classnames\";\nimport React from \"react\";\nimport styles from \"../form.module.css\";\n\ninterface ITitle {\n  children: React.ReactNode;\n}\n\nconst Title = ({ children }: ITitle) => {\n  return (\n    <p className={cn(styles.title, \"text text_type_main-medium mb-6\")}>\n      {children}\n    </p>\n  );\n};\n\nexport { Title };\n","import React from \"react\";\nimport styles from \"./form.module.css\";\n\ninterface IForm {\n  children: React.ReactNode;\n  onSubmit?: (evt: React.SyntheticEvent) => void;\n}\n\nconst Form = ({ children, onSubmit }: IForm) => {\n  return (\n    <form className={styles.form} onSubmit={onSubmit}>\n      {children}\n    </form>\n  );\n};\n\nexport default Form;\n","import { Hint } from \"./components/hint\";\nimport { InputContainer } from \"./components/input-container\";\nimport { Submit } from \"./components/submit\";\nimport { Title } from \"./components/title\";\nimport Form from \"./form\";\n\nexport default Form;\nexport { Hint, InputContainer, Submit, Title };\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport type { RootState, AppDispatch } from \"./store\";\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { TIngredient } from \"../components/app/app.typed\";\nimport { TOrder } from \"../services/slices/ws-orders\";\n\nexport const API_URL = \"https://norma.nomoreparties.space/api\";\n\nexport const getResponseData = async <T>(res: Response): Promise<T> => {\n  if (res.ok) {\n    return res.json() as Promise<T>;\n  }\n\n  const data = await res.json();\n  if (data.message === \"jwt expired\") {\n    return Promise.reject(new Error(\"jwt expired\"));\n  }\n\n  return Promise.reject(new Error(`Ошибка: ${res.status}`));\n};\n\ntype TRegisterInput = {\n  email: string;\n  password: string;\n  name: string;\n};\nexport type TAuthOutput = {\n  success: boolean;\n  user: {\n    email: string;\n    name: string;\n  };\n  accessToken: string;\n  refreshToken: string;\n};\nexport const register = (data: TRegisterInput) => {\n  return fetch(`${API_URL}/auth/register`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  }).then((res) => getResponseData<TAuthOutput>(res));\n};\n\ntype TLoginInput = {\n  email: string;\n  password: string;\n};\nexport const login = (data: TLoginInput) => {\n  return fetch(`${API_URL}/auth/login`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  }).then((res) => getResponseData<TAuthOutput>(res));\n};\n\nexport type TRefreshTokenOutput = {\n  success: boolean;\n  accessToken: string;\n  refreshToken: string;\n};\nexport const refreshToken = (refreshToken: string) => {\n  return fetch(`${API_URL}/auth/token`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ token: refreshToken }),\n  }).then((res) => getResponseData<TRefreshTokenOutput>(res));\n};\n\ntype TGetUserOutput = {\n  success: boolean;\n  user: {\n    email: string;\n    name: string;\n  };\n};\nexport const getUser = (accessToken: string) => {\n  return fetch(`${API_URL}/auth/user`, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${accessToken}`,\n    },\n  }).then((res) => getResponseData<TGetUserOutput>(res));\n};\n\ntype TPatchUserOutput = TGetUserOutput;\nexport const patchUser = (\n  accessToken: string,\n  data: { name: string; email: string }\n) => {\n  return fetch(`${API_URL}/auth/user`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${accessToken}`,\n    },\n    body: JSON.stringify(data),\n  }).then((res) => getResponseData<TPatchUserOutput>(res));\n};\n\nexport const logout = (refreshToken: string) => {\n  return fetch(`${API_URL}/auth/logout`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ token: refreshToken }),\n  }).then(getResponseData);\n};\n\nexport const forgotPassword = (email: string) => {\n  return fetch(`${API_URL}/password-reset`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email }),\n  }).then(getResponseData);\n};\n\nexport const resetPassword = (data: { password: string; token: string }) => {\n  return fetch(`${API_URL}/password-reset/reset`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  }).then(getResponseData);\n};\n\ntype TGetIngredientsOutput = { data: TIngredient[]; success: boolean };\nexport const getIngredients = () =>\n  fetch(`${API_URL}/ingredients`).then((res) =>\n    getResponseData<TGetIngredientsOutput>(res)\n  );\n\nexport type TPostOrderOutput = {\n  name: string;\n  order: {\n    number: number;\n  };\n  success: boolean;\n};\nexport const postOrder = (\n  ingredients: { ingredients: string[] },\n  token?: string\n) => {\n  let url = `${API_URL}/orders`;\n  return fetch(url, {\n    body: JSON.stringify(ingredients),\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  }).then((res) => getResponseData<TPostOrderOutput>(res));\n};\n\nexport type TGetOrdersOutput = {\n  success: boolean;\n  orders: TOrder[];\n  total: number;\n  totalToday: number;\n};\nexport const fetchOrders = (token?: string) => {\n  let url = `${API_URL}/orders/all`;\n  return fetch(url, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  }).then((res) => getResponseData<TGetOrdersOutput>(res));\n};\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\nimport * as api from \"../../utils/api\";\nimport { RootState, AppDispatch } from \"../store\";\nimport { TAuthOutput, TRefreshTokenOutput } from \"../../utils/api\";\n\ntype TUser = {\n  name: string;\n  email: string;\n};\n\ninterface IUserState {\n  accessToken: string;\n  isAuthenticated: boolean;\n\n  user: TUser;\n\n  loading: boolean;\n  error: boolean;\n\n  canResetPassword: boolean;\n}\n\nexport const initialState: IUserState = {\n  accessToken: \"\",\n  isAuthenticated: false,\n\n  user: {\n    name: \"\",\n    email: \"\",\n  },\n\n  loading: false,\n  error: false,\n\n  // неавторизованный пользователя не может зайти на /reset-password,\n  // минуя /forgot-password\n  canResetPassword: false,\n};\n\nexport const refreshToken = createAsyncThunk<TRefreshTokenOutput>(\n  \"user/refresh-token\",\n  () => {\n    const refreshToken = localStorage.getItem(\"refresh-token\");\n\n    if (!refreshToken) {\n      throw new Error(\"There is no refresh token in local storage\");\n    }\n\n    return api.refreshToken(refreshToken).then((data) => {\n      localStorage.setItem(\"refresh-token\", data.refreshToken);\n      return { ...data, accessToken: data.accessToken.split(\"Bearer \")[1] };\n    });\n  }\n);\n\nexport const register = createAsyncThunk(\n  \"user/register\",\n  (data: { name: string; email: string; password: string }) => {\n    return api\n      .register(data)\n      .then((data) => {\n        localStorage.setItem(\"refresh-token\", data.refreshToken);\n\n        return { ...data, accessToken: data.accessToken.split(\"Bearer \")[1] };\n      })\n      .catch(() => {\n        throw new Error(\"An error occurred\");\n      });\n  }\n);\n\nexport const login = createAsyncThunk<\n  TAuthOutput,\n  { email: string; password: string }\n>(\"user/login\", (data) => {\n  return api.login(data).then((data) => {\n    localStorage.setItem(\"refresh-token\", data.refreshToken);\n\n    return { ...data, accessToken: data.accessToken.split(\"Bearer \")[1] };\n  });\n});\n\nexport const logout = createAsyncThunk(\"user/logout\", () => {\n  const refreshToken = localStorage.getItem(\"refresh-token\");\n\n  if (!refreshToken) {\n    throw new Error(\"There is no refresh token in local storage\");\n  }\n\n  return api.logout(refreshToken).then((data) => {\n    localStorage.removeItem(\"refresh-token\");\n    return data;\n  });\n});\n\nexport const forgotPassword = createAsyncThunk(\n  \"user/forgot-password\",\n  (email: string) => {\n    return api.forgotPassword(email);\n  }\n);\n\nexport const getUser = createAsyncThunk<\n  TUser | void,\n  void,\n  { state: RootState; dispatch: AppDispatch }\n>(\"user/get-user\", (_, thunkAPI) => {\n  const { accessToken } = thunkAPI.getState().user;\n  return api\n    .getUser(accessToken)\n    .then((data) => data.user)\n    .catch(async (err) => {\n      if (err.message === \"jwt expired\" || err.message === \"wtf\") {\n        const resultAction = await thunkAPI.dispatch(refreshToken());\n        if (refreshToken.fulfilled.match(resultAction)) {\n          thunkAPI.dispatch(getUser());\n        }\n      }\n      thunkAPI.rejectWithValue(\"error\");\n    });\n});\n\nexport const patchUser = createAsyncThunk<\n  TUser | void,\n  TUser,\n  { state: RootState }\n>(\"user/patch-user\", (data, thunkAPI) => {\n  const { accessToken } = thunkAPI.getState().user;\n  return api\n    .patchUser(accessToken, data)\n    .then((data) => data.user)\n    .catch(async (err) => {\n      if (err.message === \"jwt expired\" || err.message === \"wtf\") {\n        const resultAction = await thunkAPI.dispatch(refreshToken());\n        if (refreshToken.fulfilled.match(resultAction)) {\n          thunkAPI.dispatch(getUser());\n        }\n      }\n      thunkAPI.rejectWithValue(\"error\");\n    });\n});\n\nexport const user = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    allowPasswordReset: (state) => {\n      state.canResetPassword = true;\n    },\n    restrictPasswordReset: (state) => {\n      state.canResetPassword = false;\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(register.pending, (state) => {\n      state.error = false;\n      state.loading = true;\n    });\n    builder.addCase(register.fulfilled, (state, action) => {\n      state.loading = false;\n      state.accessToken = action.payload.accessToken;\n      state.user = action.payload.user;\n      state.isAuthenticated = true;\n    });\n    builder.addCase(register.rejected, (state) => {\n      state.loading = false;\n      state.error = true;\n    });\n\n    builder.addCase(login.pending, (state) => {\n      state.error = false;\n      state.loading = true;\n    });\n    builder.addCase(login.fulfilled, (state, action) => {\n      state.loading = false;\n      if (action.payload) {\n        state.accessToken = action.payload.accessToken;\n        state.user = action.payload.user;\n      }\n\n      state.isAuthenticated = true;\n    });\n    builder.addCase(login.rejected, (state) => {\n      state.loading = false;\n      state.error = true;\n    });\n\n    builder.addCase(refreshToken.pending, (state) => {\n      state.error = false;\n      state.loading = true;\n    });\n    builder.addCase(refreshToken.fulfilled, (state, action) => {\n      state.loading = false;\n      state.accessToken = action.payload.accessToken;\n      state.isAuthenticated = true;\n    });\n    builder.addCase(refreshToken.rejected, (state) => {\n      state.loading = false;\n      state.error = true;\n    });\n\n    builder.addCase(logout.pending, (state) => {\n      state.error = false;\n      state.loading = true;\n    });\n    builder.addCase(logout.fulfilled, () => initialState);\n    builder.addCase(logout.rejected, (state) => {\n      state.loading = false;\n      state.error = true;\n    });\n\n    builder.addCase(getUser.pending, (state) => {\n      state.error = false;\n      state.loading = true;\n    });\n    builder.addCase(getUser.fulfilled, (state, action) => {\n      if (action.payload) {\n        state.user = action.payload;\n      }\n    });\n    builder.addCase(getUser.rejected, (state) => {\n      state.loading = false;\n      state.error = true;\n    });\n\n    builder.addCase(patchUser.pending, (state) => {\n      state.error = false;\n      state.loading = true;\n    });\n    builder.addCase(patchUser.fulfilled, (state, action) => {\n      if (action.payload) {\n        state.user = action.payload;\n      }\n    });\n    builder.addCase(patchUser.rejected, (state) => {\n      state.loading = false;\n      state.error = true;\n    });\n  },\n});\n\nexport const selectIsAuthenticated = (state: RootState) => {\n  return state.user.isAuthenticated;\n};\nexport const selectUser = (state: RootState) => {\n  return state.user.user;\n};\nexport const selectCanResetPassword = (state: RootState) => {\n  return state.user.canResetPassword;\n};\nexport const selectAccessToken = (state: RootState) => {\n  return state.user.accessToken;\n};\n\nconst { actions, reducer } = user;\n\nexport const { allowPasswordReset, restrictPasswordReset } = actions;\n\nexport default reducer;\n","import { useMemo } from \"react\";\nimport {\n  BurgerIcon,\n  ListIcon,\n  Logo,\n  ProfileIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport cn from \"classnames\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport styles from \"./app-header.module.css\";\n\nconst AppHeader = () => {\n  const history = useHistory();\n\n  const pathname = useMemo(() => history.location.pathname, [history.location]);\n\n  return (\n    <header className={cn(styles.root)}>\n      <div className={styles.container}>\n        <div className={styles.linksContainer}>\n          <Link className={styles.logo} to=\"/\">\n            <Logo />\n          </Link>\n          <Link\n            className={cn(styles.link, {\n              [styles.link_active]: pathname === \"/\",\n            })}\n            to=\"/\"\n          >\n            <BurgerIcon type={pathname === \"/\" ? \"primary\" : \"secondary\"} />\n            <p className=\"text text_type_main-default ml-2\">Конструктор</p>\n          </Link>\n          <Link\n            className={cn(styles.link, {\n              [styles.link_active]: pathname === \"/feed\",\n            })}\n            to=\"/feed\"\n          >\n            <ListIcon type={pathname === \"/feed\" ? \"primary\" : \"secondary\"} />\n            <p className=\"text text_type_main-default ml-2\">Лента заказов</p>\n          </Link>\n          <Link\n            className={cn(styles.link, styles.link_right, {\n              [styles.link_active]: pathname === \"/profile\",\n            })}\n            to=\"/profile\"\n          >\n            <ProfileIcon\n              type={pathname === \"/profile\" ? \"primary\" : \"secondary\"}\n            />\n            <p className=\"text text_type_main-default ml-2\">Личный кабинет</p>\n          </Link>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default AppHeader;\n","import AppHeader from \"../app-header/app-header\";\nimport React from \"react\";\n\nconst Layout = (props: { children: React.ReactNode; className?: string }) => {\n  if (props.className) {\n    return (\n      <div className={props.className}>\n        <AppHeader />\n        {props.children}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <AppHeader />\n      {props.children}\n    </>\n  );\n};\n\nexport default Layout;\n","import { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\nimport Form, {\n  Hint,\n  InputContainer,\n  Submit,\n  Title,\n} from \"../../components/form\";\nimport { useAppDispatch } from \"../../services/hooks\";\nimport { forgotPassword, allowPasswordReset } from \"../../services/slices/user\";\nimport { useHistory } from \"react-router-dom\";\nimport Layout from \"../../components/layout/layout\";\n\nconst ForgotPassword: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n\n  const [email, setEmail] = React.useState(\"\");\n\n  const handleSubmit = async (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n\n    const resultAction = await dispatch(forgotPassword(email));\n    if (forgotPassword.fulfilled.match(resultAction)) {\n      dispatch(allowPasswordReset());\n      history.replace(\"/reset-password\");\n    }\n  };\n\n  return (\n    <Layout>\n      <Form onSubmit={handleSubmit}>\n        <Title>Восстановление пароля</Title>\n        <InputContainer>\n          <Input\n            name=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            type=\"text\"\n            placeholder=\"Укажите e-mail\"\n            error={false}\n            errorText=\"Ошибка\"\n          />\n        </InputContainer>\n        <Submit>Восстановить</Submit>\n        <Hint linkHref=\"/login\" linkTitle=\"Войти\">\n          Вспомнили пароль?\n        </Hint>\n      </Form>\n    </Layout>\n  );\n};\n\nexport default ForgotPassword;\n","import styles from \"../../../modal/modal.module.css\";\nimport cn from \"classnames\";\n\ninterface INutritionFacts {\n  calories: number;\n  carbohydrates: number;\n  fat: number;\n  proteins: number;\n}\n\nconst NutritionFacts = (props: INutritionFacts) => {\n  return (\n    <ul className={styles.nutritionFacts}>\n      <li className={cn(styles.nutritionFact, styles.nutritionFact_size_l)}>\n        <p\n          className={cn(\n            \"text text_type_main-default text_color_inactive\",\n            styles.nutritionText\n          )}\n        >\n          Калории, ккал\n        </p>\n        <p\n          className={cn(\n            \"text text_type_digits-default text_color_inactive\",\n            styles.nutritionText\n          )}\n        >\n          {props.calories}\n        </p>\n      </li>\n      <li className={styles.nutritionFact}>\n        <p\n          className={cn(\n            \"text text_type_main-default text_color_inactive\",\n            styles.nutritionText\n          )}\n        >\n          Белки, г\n        </p>\n        <p\n          className={cn(\n            \"text text_type_digits-default text_color_inactive\",\n            styles.nutritionText\n          )}\n        >\n          {props.proteins}\n        </p>\n      </li>\n      <li className={styles.nutritionFact}>\n        <p\n          className={cn(\n            \"text text_type_main-default text_color_inactive\",\n            styles.nutritionText\n          )}\n        >\n          Жиры, г\n        </p>\n        <p\n          className={cn(\n            \"text text_type_digits-default text_color_inactive\",\n            styles.nutritionText\n          )}\n        >\n          {props.fat}\n        </p>\n      </li>\n      <li className={styles.nutritionFact}>\n        <p\n          className={cn(\n            \"text text_type_main-default text_color_inactive\",\n            styles.nutritionText\n          )}\n        >\n          Углеводы, г\n        </p>\n        <p\n          className={cn(\n            \"text text_type_digits-default text_color_inactive\",\n            styles.nutritionText\n          )}\n        >\n          {props.carbohydrates}\n        </p>\n      </li>\n    </ul>\n  );\n};\n\nexport default NutritionFacts;\n","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { IngredientType, TIngredient } from \"../../components/app/app.typed\";\nimport { getIngredients } from \"../../utils/api\";\nimport { RootState } from \"../store\";\n\ntype TIdWithQty = { id: string; qty: number };\n\ninterface IIngredientsState {\n  // ingredients\n  ingredients: TIngredient[];\n  ingredientsLoading: boolean;\n  ingredientsError: boolean;\n  activeIngredientId: string;\n  isDetailsPopupOpen: boolean;\n\n  // constructor\n  constructor: {\n    bun: null | TIdWithQty;\n    mains: TIdWithQty[];\n    price: number;\n  };\n  dragging: string;\n}\n\nexport const initialConstructorState = {\n  bun: null,\n  mains: [],\n  price: 0,\n};\nexport const initialState: IIngredientsState = {\n  // ingredients\n  ingredients: [],\n  ingredientsLoading: false,\n  ingredientsError: false,\n  activeIngredientId: \"\",\n  isDetailsPopupOpen: false,\n\n  // constructor\n  constructor: initialConstructorState,\n  dragging: \"\",\n};\n\nexport const countPrice = (state: IIngredientsState) => {\n  const ingredientsToCount = [...state.constructor.mains];\n  if (state.constructor.bun) {\n    ingredientsToCount.push(state.constructor.bun);\n  }\n\n  return ingredientsToCount.reduce((acc, item) => {\n    const ingredient = state.ingredients.find((i) => i._id === item.id);\n    if (!ingredient) return acc;\n    return acc + ingredient.price * item.qty;\n  }, 0);\n};\n\nexport const fetchIngredients = createAsyncThunk(\n  \"ingredients/fetchIngredients\",\n  getIngredients\n);\n\nexport const ingredients = createSlice({\n  name: \"ingredients\",\n  initialState,\n  reducers: {\n    // взаимодействие с попапом ингредиента\n    openDetailsPopup: (state) => {\n      state.isDetailsPopupOpen = true;\n    },\n    setActiveIngredient: (state, action: PayloadAction<string>) => {\n      state.activeIngredientId = action.payload;\n    },\n    resetActiveIngredient: (state) => {\n      state.activeIngredientId = \"\";\n    },\n    closeDetailsPopup: (state) => {\n      state.isDetailsPopupOpen = false;\n    },\n\n    // взаимодействие с конструктором\n    addIngredient: (state, action: PayloadAction<string>) => {\n      const ingredient = state.ingredients.find(\n        (i) => i._id === action.payload\n      );\n      if (!ingredient) return;\n\n      if (ingredient.type === IngredientType.BUN) {\n        state.constructor.bun = { id: action.payload, qty: 2 };\n        state.constructor.price = countPrice(state);\n\n        return;\n      }\n\n      const existingIngredientIndex = state.constructor.mains.findIndex(\n        (i) => i.id === action.payload\n      );\n      if (existingIngredientIndex !== -1) {\n        // если ингредиент найден в конструкторе, увеличим его qty\n        state.constructor.mains = state.constructor.mains.map((i) =>\n          i.id === action.payload ? { ...i, qty: i.qty + 1 } : i\n        );\n      } else {\n        // иначе добавим ингредиент\n        state.constructor.mains.push({ id: action.payload, qty: 1 });\n      }\n\n      state.constructor.price = countPrice(state);\n    },\n    deleteIngredient: (state, action: PayloadAction<string>) => {\n      const ingredient = state.ingredients.find(\n        (i) => i._id === action.payload\n      );\n      if (!ingredient || ingredient.type === IngredientType.BUN) return;\n\n      const deletingIngredientIndex = state.constructor.mains.findIndex(\n        (i) => i.id === action.payload\n      );\n      if (deletingIngredientIndex === -1) return;\n\n      const deletingIngredient =\n        state.constructor.mains[deletingIngredientIndex];\n      if (deletingIngredient.qty > 1) {\n        deletingIngredient.qty -= 1;\n      } else {\n        state.constructor.mains = state.constructor.mains.filter(\n          (i) => i.id !== action.payload\n        );\n      }\n\n      state.constructor.price = countPrice(state);\n    },\n    setDragging: (state, action: PayloadAction<string>) => {\n      state.dragging = action.payload;\n    },\n    swapIngredients: (state, action: PayloadAction<string>) => {\n      const { mains } = state.constructor;\n\n      const draggingIndex = mains.findIndex((ing) => ing.id === state.dragging);\n      const hoveredIndex = mains.findIndex((ing) => ing.id === action.payload);\n\n      if (draggingIndex > hoveredIndex) {\n        const temp = mains[hoveredIndex];\n        mains[hoveredIndex] = mains[draggingIndex];\n        mains[draggingIndex] = temp;\n      } else if (draggingIndex < hoveredIndex) {\n        const temp = mains[draggingIndex];\n        mains[draggingIndex] = mains[hoveredIndex];\n        mains[hoveredIndex] = temp;\n      }\n    },\n    clearConstructor: (state) => {\n      state.constructor = initialConstructorState;\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(fetchIngredients.pending, (state) => {\n      state.ingredientsLoading = true;\n    });\n    builder.addCase(fetchIngredients.fulfilled, (state, action) => {\n      state.ingredients = action.payload.data;\n      state.ingredientsLoading = false;\n      state.ingredientsError = false;\n    });\n    builder.addCase(fetchIngredients.rejected, (state) => {\n      state.ingredientsError = true;\n    });\n  },\n});\n\nexport const selectIngredients = (state: RootState) => {\n  return state.ingredients.ingredients;\n};\nexport const selectActiveIngredient = (state: RootState) => {\n  return state.ingredients.ingredients.find(\n    (i) => i._id === state.ingredients.activeIngredientId\n  );\n};\nexport const selectBun = (state: RootState) => {\n  const bun = state.ingredients.ingredients.find(\n    (i) => i._id === state.ingredients.constructor.bun?.id\n  );\n  if (!bun) return null;\n\n  return { ...bun, count: 2 };\n};\nexport const selectMains = (state: RootState) => {\n  return state.ingredients.constructor.mains.map((main) => {\n    const foundIngredient = state.ingredients.ingredients.find(\n      (ingredient) => ingredient._id === main.id\n    )!;\n    return { ...foundIngredient, count: main.qty };\n  });\n};\nexport const selectPrice = (state: RootState) => {\n  return state.ingredients.constructor.price;\n};\nexport const selectIngredientQty = (id: string) => (state: RootState) => {\n  const ingredient = state.ingredients.ingredients.find((i) => i._id === id);\n  if (!ingredient) return 0;\n\n  if (ingredient.type === IngredientType.BUN) {\n    const bun = state.ingredients.constructor.bun;\n    return bun && bun.id === id ? bun.qty : 0;\n  }\n\n  const main = state.ingredients.constructor.mains.find((i) => i.id === id);\n  return main ? main.qty : 0;\n};\nexport const selectIngredientsLoading = (state: RootState) => {\n  return state.ingredients.ingredientsLoading;\n};\nexport const selectIngredientById = (id: string) => (state: RootState) => {\n  return state.ingredients.ingredients.find((ing) => ing._id === id);\n};\n\nconst { actions, reducer } = ingredients;\n\nexport const {\n  closeDetailsPopup,\n  openDetailsPopup,\n  resetActiveIngredient,\n  addIngredient,\n  deleteIngredient,\n  setDragging,\n  swapIngredients,\n  setActiveIngredient,\n  clearConstructor,\n} = actions;\n\nexport default reducer;\n","import cn from \"classnames\";\nimport styles from \"../modal/modal.module.css\";\nimport NutritionFacts from \"./components/nutrition-facts/nutrition-facts\";\nimport { useParams } from \"react-router-dom\";\nimport { useAppSelector } from \"../../services/hooks\";\nimport { selectIngredientById } from \"../../services/slices/ingredients\";\n\nconst IngredientDetails = () => {\n  const params = useParams<{ id: string }>();\n\n  const ingredient = useAppSelector(selectIngredientById(params.id));\n\n  if (!ingredient) {\n    return <div>Ingredient not found</div>;\n  }\n\n  return (\n    <div>\n      <h1\n        style={{ textAlign: \"center\" }}\n        className={\"text text_type_main-large pt-3 pb-3\"}\n      >\n        Детали ингредиента\n      </h1>\n      <img\n        className={styles.image}\n        src={ingredient.image_large}\n        alt={ingredient.name}\n      />\n      <h2 className={cn(\"text text_type_main-medium pt-2 pb-8\", styles.title)}>\n        {ingredient.name}\n      </h2>\n      <NutritionFacts {...ingredient} />\n    </div>\n  );\n};\n\nexport default IngredientDetails;\n","import React from \"react\";\nimport IngredientDetails from \"../../components/ingredient-details/ingredient-details\";\nimport { useAppSelector } from \"../../services/hooks\";\nimport {\n  selectIngredients,\n  selectIngredientsLoading,\n} from \"../../services/slices/ingredients\";\nimport Layout from \"../../components/layout/layout\";\n\nconst CONTAINER_STYLE = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  marginTop: 120,\n};\n\nconst Ingredient: React.FC = () => {\n  const ingredients = useAppSelector(selectIngredients);\n  const ingredientsLoading = useAppSelector(selectIngredientsLoading);\n\n  if (!ingredients.length || ingredientsLoading) {\n    return (\n      <Layout>\n        <h2 style={{ textAlign: \"center\" }}>Loading...</h2>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div style={CONTAINER_STYLE}>\n        <IngredientDetails />\n      </div>\n    </Layout>\n  );\n};\n\nexport default Ingredient;\n","import {\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\nimport { Hint, InputContainer, Submit, Title } from \"../../components/form\";\nimport Form from \"../../components/form/form\";\nimport { useAppDispatch } from \"../../services/hooks\";\nimport { login } from \"../../services/slices/user\";\nimport Layout from \"../../components/layout/layout\";\n\nconst Login: React.FC = () => {\n  const dispatch = useAppDispatch();\n\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  const handleSubmit = async (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n    const data = { email, password };\n    dispatch(login(data));\n  };\n\n  return (\n    <Layout>\n      <Form onSubmit={handleSubmit}>\n        <Title>Вход</Title>\n        <InputContainer>\n          <Input\n            name=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            type=\"text\"\n            placeholder=\"E-mail\"\n            error={false}\n            errorText=\"Ошибка\"\n          />\n        </InputContainer>\n        <InputContainer>\n          <PasswordInput\n            name=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </InputContainer>\n        <Submit>Войти</Submit>\n        <Hint linkHref=\"/register\" linkTitle=\"Зарегистрироваться\">\n          Вы новый пользователь?\n        </Hint>\n        <Hint linkHref=\"/forgot-password\" linkTitle=\"Восстановить пароль\">\n          Забыли пароль?\n        </Hint>\n      </Form>\n    </Layout>\n  );\n};\n\nexport default Login;\n","import {\n  ConstructorElement,\n  DragIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { TIngredientWithCount } from \"../../../app/app.typed\";\nimport styles from \"../../burger-constructor.module.css\";\nimport {\n  deleteIngredient,\n  openDetailsPopup,\n  setDragging,\n  swapIngredients,\n  setActiveIngredient,\n} from \"../../../../services/slices/ingredients\";\nimport { useAppDispatch } from \"../../../../services/hooks\";\nimport { useOnIngredientClick } from \"./ingredient.utils\";\nimport cn from \"classnames\";\nimport { useDrag, useDrop } from \"react-dnd\";\nimport { useEffect } from \"react\";\n\ninterface IIngredient extends TIngredientWithCount {\n  bun?: boolean;\n  position?: \"top\" | \"bottom\";\n}\n\nconst Ingredient = (props: IIngredient) => {\n  const dispatch = useAppDispatch();\n\n  const onDeleteClick = () => dispatch(deleteIngredient(props._id));\n  const onIngredientClick = () => {\n    dispatch(setActiveIngredient(props._id));\n    dispatch(openDetailsPopup());\n  };\n  const { containerRef, onClick } = useOnIngredientClick(onIngredientClick);\n\n  const [{ opacity, isDragging }, ref] = useDrag({\n    type: \"order\",\n    item: { id: props._id },\n    collect: (monitor) => ({\n      opacity: monitor.isDragging() ? 0.5 : 1,\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [{ isHover, target }, dropTarget] = useDrop({\n    accept: \"order\",\n    collect: (monitor) => ({\n      isHover: monitor.isOver(),\n      target: monitor.getItem(),\n    }),\n    drop() {\n      dispatch(setDragging(\"\"));\n    },\n  });\n\n  useEffect(() => {\n    if (isDragging) {\n      dispatch(setDragging(props._id));\n    }\n  }, [isDragging]);\n\n  useEffect(() => {\n    if (isHover && target.id !== props._id) {\n      dispatch(swapIngredients(props._id));\n    }\n  }, [isHover, target]);\n\n  if (props.bun && props.position) {\n    const position = props.position === \"top\" ? \" (верх)\" : \" (низ)\";\n\n    return (\n      <div\n        className={cn(\n          styles.ingredientContainer,\n          styles.ingredientContainer_outter\n        )}\n      >\n        <ConstructorElement\n          type={props.position}\n          isLocked={true}\n          text={props.name + position}\n          price={props.price}\n          thumbnail={props.image}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <li ref={dropTarget} className={styles.listItem}>\n      <div className={styles.item} ref={ref}>\n        <button className={styles.button}>\n          <DragIcon type=\"primary\" />\n        </button>\n        <div\n          className={styles.ingredientContainer}\n          onClick={onClick}\n          ref={containerRef}\n          style={{ opacity }}\n        >\n          <ConstructorElement\n            text={\n              props.count < 2 ? props.name : `${props.name} x${props.count}`\n            }\n            price={props.price}\n            thumbnail={props.image}\n            handleClose={onDeleteClick}\n          />\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default Ingredient;\n","import { SyntheticEvent, useRef } from \"react\";\n\n/** Костыль, чтобы предотвратить клик по ингредиенту при клике по кнопке удаления. */\nexport const useOnIngredientClick = (cb: () => void) => {\n  const DELETE_BUTTON_SELECTOR = \".constructor-element__action\";\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const onClick = (evt: SyntheticEvent) => {\n    if (!containerRef.current) return;\n\n    const deleteButtonElement = containerRef.current.querySelector(\n      DELETE_BUTTON_SELECTOR\n    )!;\n    const targetElement = evt.target as Node;\n\n    if (!deleteButtonElement.contains(targetElement)) {\n      cb();\n    }\n  };\n\n  return { containerRef, onClick };\n};\n","import React, { SyntheticEvent, useRef } from \"react\";\nimport styles from \"./modal-overlay.module.css\";\n\ninterface IModalOverlay {\n  onClose: () => void;\n}\n\nconst ModalOverlay = (props: IModalOverlay) => {\n  const overlayRef = useRef<HTMLDivElement>(null);\n\n  const handleClick = (evt: SyntheticEvent) => {\n    if (evt.target === overlayRef.current) {\n      props.onClose();\n    }\n  };\n\n  return <div className={styles.root} onClick={handleClick} ref={overlayRef} />;\n};\n\nexport default ModalOverlay;\n","import React, { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport cn from \"classnames\";\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\nimport styles from \"./modal.module.css\";\n\nconst modalRoot = document.getElementById(\"react-modals\")!;\n\ninterface IModal {\n  open: boolean;\n  id?: string;\n  onClose: () => void;\n  children: React.ReactNode;\n}\n\nconst Modal = (props: IModal) => {\n  useEffect(() => {\n    const onEscKeydown = (evt: KeyboardEvent) => {\n      if (evt.key === \"Escape\") {\n        props.onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", onEscKeydown);\n\n    return () => document.removeEventListener(\"keydown\", onEscKeydown);\n  }, [props]);\n\n  return ReactDOM.createPortal(\n    <>\n      <div className={cn(styles.root, { [styles.root_open]: props.open })}>\n        <ModalOverlay onClose={props.onClose} />\n        <div id={props.id} className={styles.content}>\n          <button className={styles.closeButton} onClick={props.onClose}>\n            <CloseIcon type=\"primary\" />\n          </button>\n          {props.children}\n        </div>\n      </div>\n    </>,\n    modalRoot\n  );\n};\n\nexport default Modal;\n","export default __webpack_public_path__ + \"static/media/icon-accepted.7341dd32.svg\";","import React from \"react\";\nimport cn from \"classnames\";\nimport iconAccepted from \"../../images/icon-accepted.svg\";\n\nimport styles from \"./order-details.module.css\";\n\ninterface IOrderDetails {\n  name: string;\n  order: {\n    number: number;\n  };\n  success: boolean;\n}\n\nconst OrderDetails = (props: IOrderDetails) => (\n  <>\n    <div className={styles.root}>\n      <h1 className={cn(\"text text_type_digits-large pt-20 pb-8\")}>\n        {props.order.number}\n      </h1>\n      <p className=\"text text_type_main-medium pb-15\">идентификатор заказа</p>\n      <img className=\"pb-15\" src={iconAccepted} alt=\"Иконка успеха\" />\n      <p className=\"text text_type_main-default pb-2\">\n        Ваш заказ начали готовить\n      </p>\n      <p className=\"text text_type_main-default pb-15 text_color_inactive\">\n        Дождитесь готовности на орбитальной станции\n      </p>\n    </div>\n  </>\n);\n\nexport default OrderDetails;\n","import { createReducer, PayloadAction, createAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\n\nexport const WS_ORDER_ACTIONS = {\n  wsInit: \"wsOrder/init\",\n  wsInitWithCustomUrl: \"wsOrder/wsInitWithCustomUrl\",\n  wsSendMessage: \"wsOrder/sendMessage\",\n  wsClose: \"wsOrder/close\",\n  onOpen: \"wsOrder/onOpen\",\n  onClose: \"wsOrder/onClose\",\n  onError: \"wsOrder/onError\",\n  onMessage: \"wsOrder/onMessage\",\n};\n\nexport type TModifiedIngredient = {\n  id: string;\n  img: string;\n  name: string;\n  price: number;\n  qty: number;\n};\n\nexport type TOrder = {\n  _id: string;\n  status: string | \"pending\" | \"done\";\n  name: string;\n  createdAt: string;\n  updatedAt: string;\n  number: number;\n  ingredients: string[];\n\n  price?: number;\n  modifiedIngredients?: TModifiedIngredient[];\n};\n\ninterface IWsOrdersState {\n  orders: TOrder[] | undefined;\n  total: number | undefined;\n  totalToday: number | undefined;\n}\n\nexport const initialState: IWsOrdersState = {\n  orders: undefined,\n  total: undefined,\n  totalToday: undefined,\n};\n\nexport const updateOrders = createAction<TOrder[]>(\"updateOrders\");\n\nconst wsOrdersReducer = createReducer(initialState, {\n  [updateOrders.type]: (state, action: PayloadAction<TOrder[]>) => {\n    state.orders = action.payload;\n    return state;\n  },\n  [WS_ORDER_ACTIONS.onMessage]: (\n    state,\n    action: PayloadAction<IWsOrdersState>\n  ) => {\n    state = action.payload;\n\n    return state;\n  },\n  [WS_ORDER_ACTIONS.onClose]: () => initialState,\n});\n\nexport const selectOrders = (state: RootState) => {\n  return state.wsOrders.orders;\n};\nexport const selectOrderById = (id: string) => (state: RootState) => {\n  return state.wsOrders.orders?.find((o) => o._id === id);\n};\nexport const selectStats = (state: RootState) => {\n  const { total, totalToday } = state.wsOrders;\n  return { total, totalToday };\n};\n\nexport default wsOrdersReducer;\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport {\n  postOrder,\n  TPostOrderOutput,\n  fetchOrders,\n} from \"../../utils/api\";\nimport { RootState, AppDispatch } from \"../store\";\nimport { TOrder, updateOrders } from \"./ws-orders\";\n\ntype TOrderDetails = {\n  name: string;\n  order: {\n    number: number;\n  };\n  success: boolean;\n};\n\ninterface IOrderState {\n  orderDetails: TOrderDetails;\n  orderDetailsLoading: boolean;\n  orderDetailsError: boolean;\n  isOrderPopupOpen: boolean;\n  activeOrder: TOrder | undefined;\n  orders: TOrder[] | undefined;\n  ordersLoading: boolean;\n}\n\nexport const initialState: IOrderState = {\n  orderDetails: {\n    name: \"\",\n    order: {\n      number: -1,\n    },\n    success: false,\n  },\n  activeOrder: undefined,\n  orderDetailsLoading: false,\n  orderDetailsError: false,\n  isOrderPopupOpen: false,\n  orders: undefined,\n  ordersLoading: false,\n};\n\nexport const postOrderThunk = createAsyncThunk<\n  TPostOrderOutput,\n  string[],\n  { state: RootState; dispatch: AppDispatch }\n>(\"order/postOrder\", (ingredients, thunkAPI) => {\n  const token = thunkAPI.getState().user.accessToken;\n  return postOrder({ ingredients }, token);\n});\nexport const fetchOrdersThunk = createAsyncThunk<\n  void,\n  void,\n  { state: RootState; dispatch: AppDispatch }\n>(\"order/fetchOrders\", async (_, thunkAPI) => {\n  const token = thunkAPI.getState().user.accessToken;\n  const orders = await fetchOrders(token);\n  thunkAPI.dispatch(updateOrders(orders.orders));\n});\n\nexport const order = createSlice({\n  name: \"order\",\n  initialState,\n  reducers: {\n    openOrderPopup: (state) => {\n      state.isOrderPopupOpen = true;\n    },\n    closeOrderPopup: (state) => {\n      state.isOrderPopupOpen = false;\n    }\n  },\n  extraReducers: (builder) => {\n    builder.addCase(postOrderThunk.pending, (state) => {\n      state.orderDetailsLoading = true;\n    });\n    builder.addCase(postOrderThunk.fulfilled, (state, action) => {\n      state.orderDetails = action.payload;\n      state.orderDetailsLoading = false;\n      state.orderDetailsError = false;\n    });\n    builder.addCase(postOrderThunk.rejected, (state) => {\n      state.orderDetailsError = true;\n    });\n  },\n});\n\nexport const selectOrderDetails = (state: RootState) => {\n  return state.order.orderDetails;\n};\nexport const selectOrderLoading = (state: RootState) => {\n  return state.order.orderDetailsLoading;\n};\nexport const selectIsOrderPopupOpen = (state: RootState) => {\n  return state.order.isOrderPopupOpen;\n};\n\nconst { actions, reducer } = order;\n\nexport const { openOrderPopup, closeOrderPopup } = actions;\n\nexport default reducer;\n","import cn from \"classnames\";\nimport React from \"react\";\nimport {\n  Button,\n  CurrencyIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport Ingredient from \"./components/ingredient/ingredient\";\nimport Modal from \"../modal/modal\";\nimport OrderDetails from \"../order-details/order-details\";\nimport { useAppDispatch, useAppSelector } from \"../../services/hooks\";\nimport {\n  addIngredient,\n  selectBun,\n  selectMains,\n  selectPrice,\n  clearConstructor,\n} from \"../../services/slices/ingredients\";\nimport styles from \"./burger-constructor.module.css\";\nimport {\n  postOrderThunk,\n  openOrderPopup,\n  closeOrderPopup,\n  selectIsOrderPopupOpen,\n  selectOrderDetails,\n  selectOrderLoading,\n} from \"../../services/slices/order\";\nimport { useDrop } from \"react-dnd\";\nimport { selectIsAuthenticated } from \"../../services/slices/user\";\nimport { useHistory } from \"react-router-dom\";\n\nconst BurgerConstructor = () => {\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  const bun = useAppSelector(selectBun);\n  const mains = useAppSelector(selectMains);\n  const price = useAppSelector(selectPrice);\n  const orderDetails = useAppSelector(selectOrderDetails);\n  const orderLoading = useAppSelector(selectOrderLoading);\n  const isOrderPopupOpen = useAppSelector(selectIsOrderPopupOpen);\n  const isAuthenticated = useAppSelector(selectIsAuthenticated);\n\n  const [{ isHover }, dropTarget] = useDrop({\n    accept: \"order-from-menu\",\n    collect: (monitor) => ({\n      isHover: monitor.isOver(),\n    }),\n    drop(item: { id: string }) {\n      dispatch(addIngredient(item.id));\n    },\n  });\n\n  const onOrderSubmit = () => {\n    if (!bun || orderLoading) return;\n\n    if (!isAuthenticated) {\n      return history.push(\"/login\");\n    }\n\n    const ingredientsIds = [bun, ...mains].map((ingredient) => ingredient._id);\n    dispatch(postOrderThunk(ingredientsIds)).then(() => {\n      dispatch(openOrderPopup());\n      dispatch(clearConstructor());\n    });\n  };\n\n  const onClose = () => dispatch(closeOrderPopup());\n\n  return (\n    <section\n      className={cn(styles.root, \"ml-10\", { [styles.root_over]: isHover })}\n      ref={dropTarget}\n    >\n      {bun && <Ingredient bun position=\"top\" {...bun} />}\n      <ul className={cn(styles.list, \"custom-scroll\")}>\n        {mains.map((item) => (\n          <Ingredient {...item} key={item._id} />\n        ))}\n      </ul>\n      {bun && <Ingredient bun position=\"bottom\" {...bun} />}\n\n      <div style={{ marginTop: \"auto\" }}>\n        <div className={cn(styles.results, \"mt-10\")}>\n          <p className={cn(styles.totalCost, \"mr-10\")}>\n            <span className=\"text text_type_digits-medium mr-2\">{price}</span>\n            <CurrencyIcon type=\"primary\" />\n          </p>\n          <Button type=\"primary\" size=\"large\" onClick={onOrderSubmit}>\n            {orderLoading ? \"Загрузка...\" : \"Оформить заказ\"}\n          </Button>\n        </div>\n      </div>\n\n      <Modal open={isOrderPopupOpen} onClose={onClose}>\n        <OrderDetails {...orderDetails} />\n      </Modal>\n    </section>\n  );\n};\n\nexport default BurgerConstructor;\n","import styles from \"../../burger-ingredients.module.css\";\nimport {\n  Counter,\n  CurrencyIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport cn from \"classnames\";\nimport { TIngredient } from \"../../../app/app.typed\";\nimport { selectIngredientQty } from \"../../../../services/slices/ingredients\";\nimport { useAppSelector } from \"../../../../services/hooks\";\nimport { useDrag } from \"react-dnd\";\nimport { Link, useLocation } from \"react-router-dom\";\n\ninterface IIngredient extends TIngredient {}\n\nconst Ingredient = (props: IIngredient) => {\n  const location = useLocation();\n  const ingredientCount = useAppSelector(selectIngredientQty(props._id));\n\n  const [, ref] = useDrag({\n    type: \"order-from-menu\",\n    item: { id: props._id },\n  });\n\n  return (\n    <Link\n      key={props._id}\n      className={styles.link}\n      to={{\n        pathname: `/ingredients/${props._id}`,\n        state: { background: location },\n      }}\n    >\n      <div className={styles.burgerIngredient} ref={ref}>\n        {ingredientCount > 0 && (\n          <Counter count={ingredientCount} size=\"default\" />\n        )}\n        <img className=\"pr-4 pl-4 mb-1\" src={props.image} alt={props.name} />\n        <p className={styles.ingredientCost}>\n          <span className=\"text text_type_digits-default mr-2\">\n            {props.price}\n          </span>{\" \"}\n          <CurrencyIcon type=\"primary\" />\n        </p>\n        <h3\n          className={cn(styles.ingredientTitle, \"text text_type_main-default\")}\n        >\n          {props.name}\n        </h3>\n      </div>\n    </Link>\n  );\n};\n\nexport default Ingredient;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport cn from \"classnames\";\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport Ingredient from \"./components/ingredient/ingredient\";\nimport { IngredientType, TIngredient } from \"../app/app.typed\";\nimport { useAppSelector } from \"../../services/hooks\";\nimport { selectIngredients } from \"../../services/slices/ingredients\";\nimport { sortIngredientsByType } from \"./burger-ingredients.utils\";\nimport styles from \"./burger-ingredients.module.css\";\n\nconst BurgerIngredients = () => {\n  const ingredients = useAppSelector(selectIngredients);\n\n  const [current, setCurrent] = useState(IngredientType.BUN);\n  const { buns, mains, sauces } = sortIngredientsByType(ingredients);\n\n  const onTabClick = (value: string) => setCurrent(value);\n\n  const renderIngredient = (item: TIngredient) => (\n    <li className={styles.ingredientsItem} key={item._id}>\n      <Ingredient {...item} />\n    </li>\n  );\n\n  const [headersScroll, setHeadersScroll] = useState([0, 0, 0]);\n  const [offsetTop, setOffsetTop] = useState(0);\n\n  const tabsRef = useRef<HTMLDivElement>(null);\n  const headersRef = useRef<any>(null);\n\n  useEffect(() => {\n    setOffsetTop(Number(tabsRef.current?.getBoundingClientRect().y));\n    const headerElements = document.querySelectorAll(\".ing-type-header\");\n    headersRef.current = Array.from(headerElements);\n\n    setHeadersScroll(\n      headersRef.current.map(\n        (elem: HTMLHeadingElement) => elem.getBoundingClientRect().y - offsetTop\n      )\n    );\n  }, [offsetTop]);\n\n  useEffect(() => {\n    if (headersScroll[2] < 0) {\n      setCurrent(IngredientType.MAIN);\n    } else if (headersScroll[1] < 0) {\n      setCurrent(IngredientType.SAUCE);\n    } else if (headersScroll[0] <= 0) {\n      setCurrent(IngredientType.BUN);\n    }\n  }, [headersScroll]);\n\n  const handleScroll = () => {\n    setHeadersScroll(\n      headersRef.current.map(\n        (elem: HTMLHeadingElement) => elem.getBoundingClientRect().y - offsetTop\n      )\n    );\n  };\n\n  return (\n    <section className={styles.root}>\n      <h1 className={cn(styles.title, \"text text_type_main-large\")}>\n        Соберите бургер\n      </h1>\n      <div className=\"mb-10\" style={{ display: \"flex\" }}>\n        <a className={styles.tabLink} href={`#${IngredientType.BUN}`}>\n          <Tab\n            value={IngredientType.BUN}\n            active={current === IngredientType.BUN}\n            onClick={onTabClick}\n          >\n            Булки\n          </Tab>\n        </a>\n        <a className={styles.tabLink} href={`#${IngredientType.SAUCE}`}>\n          <Tab\n            value={IngredientType.SAUCE}\n            active={current === IngredientType.SAUCE}\n            onClick={onTabClick}\n          >\n            Соусы\n          </Tab>\n        </a>\n        <a className={styles.tabLink} href={`#${IngredientType.MAIN}`}>\n          <Tab\n            value={IngredientType.MAIN}\n            active={current === IngredientType.MAIN}\n            onClick={onTabClick}\n          >\n            Начинки\n          </Tab>\n        </a>\n      </div>\n      <div\n        className={cn(styles.ingredientsContainer, \"custom-scroll\")}\n        onScroll={handleScroll}\n        ref={tabsRef}\n      >\n        <h2\n          id={IngredientType.BUN}\n          className=\"ing-type-header text text_type_main-medium mb-6\"\n        >\n          Булки\n        </h2>\n        <ul className={styles.ingredientsList}>{buns.map(renderIngredient)}</ul>\n        <h2\n          id={IngredientType.SAUCE}\n          className=\"ing-type-header text text_type_main-medium mb-6\"\n        >\n          Соусы\n        </h2>\n        <ul className={styles.ingredientsList}>\n          {sauces.map(renderIngredient)}\n        </ul>\n        <h2\n          id={IngredientType.MAIN}\n          className=\"ing-type-header text text_type_main-medium mb-6\"\n        >\n          Начинки\n        </h2>\n        <ul className={styles.ingredientsList}>\n          {mains.map(renderIngredient)}\n        </ul>\n      </div>\n    </section>\n  );\n};\n\nexport default BurgerIngredients;\n","import { IngredientType, TIngredient } from \"../app/app.typed\";\n\nexport const sortIngredientsByType = (data: TIngredient[]) => {\n  const buns = data.filter((i) => i.type === IngredientType.BUN);\n  const mains = data.filter((i) => i.type === IngredientType.MAIN);\n  const sauces = data.filter((i) => i.type === IngredientType.SAUCE);\n  return { buns, mains, sauces };\n};\n","import React from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport styles from \"../../components/app/app.module.css\";\nimport BurgerConstructor from \"../../components/burger-constructor/burger-constructor\";\nimport BurgerIngredients from \"../../components/burger-ingredients/burger-ingredients\";\nimport Layout from \"../../components/layout/layout\";\n\nconst Main: React.FC = () => {\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <Layout className={styles.root}>\n        <div className={styles.burgerContainer}>\n          <BurgerIngredients />\n          <BurgerConstructor />\n        </div>\n      </Layout>\n    </DndProvider>\n  );\n};\n\nexport default Main;\n","import React from \"react\";\nimport Layout from \"../../components/layout/layout\";\n\nconst NotFound: React.FC = () => {\n  return <Layout>NotFound</Layout>;\n};\n\nexport default NotFound;\n","import {\n  Input,\n  Button,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React, { useState, useMemo } from \"react\";\nimport { InputContainer } from \"../form\";\n\nimport styles from \"./edit-profile.module.css\";\nimport { useAppSelector, useAppDispatch } from \"../../services/hooks\";\nimport { selectUser, patchUser } from \"../../services/slices/user\";\n\nconst EditProfile = () => {\n  const dispatch = useAppDispatch();\n  const user = useAppSelector(selectUser);\n\n  const [name, setName] = useState(user.name);\n  const [email, setEmail] = useState(user.email);\n\n  const shouldShowButtons = useMemo(\n    () => name !== user.name || email !== user.email,\n    [user, name, email]\n  );\n\n  const handleSubmit = (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n    dispatch(patchUser({ name, email }));\n  };\n\n  const handleReset = () => {\n    setName(user.name);\n    setEmail(user.email);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className={styles.form}>\n      <InputContainer>\n        <Input\n          name=\"name\"\n          type=\"text\"\n          value={name}\n          onChange={(evt) => setName(evt.target.value)}\n          icon=\"EditIcon\"\n          placeholder=\"Имя\"\n        />\n      </InputContainer>\n\n      <InputContainer>\n        <Input\n          name=\"login\"\n          type=\"text\"\n          value={email}\n          onChange={(evt) => setEmail(evt.target.value)}\n          icon=\"EditIcon\"\n          placeholder=\"Логин\"\n        />\n      </InputContainer>\n\n      <InputContainer>\n        <Input\n          name=\"password\"\n          type=\"password\"\n          value=\"password\"\n          onChange={() => {}}\n          icon=\"EditIcon\"\n          placeholder=\"Пароль\"\n          disabled\n        />\n      </InputContainer>\n\n      {shouldShowButtons && (\n        <div className={styles.buttons}>\n          <Button type=\"secondary\" size=\"medium\" onClick={handleReset}>\n            Отмена\n          </Button>\n          <Button>Сохранить</Button>\n        </div>\n      )}\n    </form>\n  );\n};\n\nexport default EditProfile;\n","import cn from \"classnames\";\nimport styles from \"./profile-sidebar.module.css\";\n\nimport { useAppDispatch } from \"../../services/hooks\";\nimport { logout } from \"../../services/slices/user\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst ProfileSidebar = () => {\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n\n  const handleLogoutClick = () => dispatch(logout());\n\n  return (\n    <aside className={styles.root}>\n      <ul className={styles.tabs}>\n        <li>\n          <Link\n            className={cn(\"text text_type_main-medium pt-4 pb-4\", styles.link, {\n              [styles.link_active]: history.location.pathname === \"/profile\",\n            })}\n            to=\"/profile\"\n          >\n            Профиль\n          </Link>\n        </li>\n        <li>\n          <Link\n            className={cn(styles.link, \"text text_type_main-medium pt-4 pb-4\", {\n              [styles.link_active]:\n                history.location.pathname === \"/profile/orders\",\n            })}\n            to=\"/profile/orders\"\n          >\n            История заказов\n          </Link>\n        </li>\n        <li>\n          <button\n            onClick={handleLogoutClick}\n            className={cn(\n              styles.button,\n              \"text text_type_main-medium text_color_inactive pt-4 pb-4\"\n            )}\n          >\n            Выход\n          </button>\n        </li>\n      </ul>\n      <p className=\"text text_type_main-default text_color_inactive mt-20\">\n        В этом разделе вы можете изменить свои персональные данные\n      </p>\n    </aside>\n  );\n};\n\nexport default ProfileSidebar;\n","import React from \"react\";\nimport EditProfile from \"../../components/edit-profile/edit-profile\";\nimport ProfileSidebar from \"../../components/profile-sidebar/profile-sidebar\";\nimport Layout from \"../../components/layout/layout\";\n\nexport const CONTAINER_STYLE = {\n  width: \"100%\",\n  maxWidth: 1280,\n  padding: \"0 40px\",\n  display: \"flex\",\n  margin: \"120px auto 0\",\n};\n\nconst Profile: React.FC = () => {\n  return (\n    <Layout>\n      <div style={CONTAINER_STYLE}>\n        <ProfileSidebar />\n        <EditProfile />\n      </div>\n    </Layout>\n  );\n};\n\nexport default Profile;\n","import {\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\nimport Form, {\n  Hint,\n  InputContainer,\n  Submit,\n  Title,\n} from \"../../components/form\";\nimport { useAppDispatch } from \"../../services/hooks\";\nimport { register } from \"../../services/slices/user\";\nimport { useHistory } from \"react-router-dom\";\nimport Layout from \"../../components/layout/layout\";\n\nconst Register: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n\n  const [name, setName] = React.useState(\"\");\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  const handleSubmit = async (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n    const data = { name, email, password };\n\n    const resultAction = await dispatch(register(data));\n    if (register.fulfilled.match(resultAction)) {\n      history.replace(\"/\");\n    }\n  };\n\n  return (\n    <Layout>\n      <Form onSubmit={handleSubmit}>\n        <Title>Регистрация</Title>\n        <InputContainer>\n          <Input\n            name=\"name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            type=\"text\"\n            placeholder=\"Имя\"\n            error={false}\n            errorText=\"Ошибка\"\n          />\n        </InputContainer>\n        <InputContainer>\n          <Input\n            name=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            type=\"text\"\n            placeholder=\"E-mail\"\n            error={false}\n            errorText=\"Ошибка\"\n          />\n        </InputContainer>\n        <InputContainer>\n          <PasswordInput\n            name=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </InputContainer>\n        <Submit>Зарегистрироваться</Submit>\n        <Hint linkHref=\"/login\" linkTitle=\"Войти\">\n          Уже зарегистрированы?\n        </Hint>\n      </Form>\n    </Layout>\n  );\n};\n\nexport default Register;\n","import {\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React from \"react\";\nimport Form, {\n  Hint,\n  InputContainer,\n  Submit,\n  Title,\n} from \"../../components/form\";\nimport Layout from \"../../components/layout/layout\";\n\nconst ResetPassword: React.FC = () => {\n  const [value, setValue] = React.useState(\"\");\n\n  return (\n    <Layout>\n      <Form>\n        <Title>Восстановление пароля</Title>\n        <InputContainer>\n          <PasswordInput\n            name=\"password\"\n            value={value}\n            onChange={(e) => setValue(e.target.value)}\n          />\n        </InputContainer>\n        <InputContainer>\n          <Input\n            name=\"code\"\n            value={value}\n            onChange={(e) => setValue(e.target.value)}\n            type=\"text\"\n            placeholder=\"Введите код из письма\"\n            error={false}\n            errorText=\"Ошибка\"\n          />\n        </InputContainer>\n        <Submit>Сохранить</Submit>\n        <Hint linkHref=\"/login\" linkTitle=\"Войти\">\n          Вспомнили пароль?\n        </Hint>\n      </Form>\n    </Layout>\n  );\n};\n\nexport default ResetPassword;\n","import React from \"react\";\nimport { Redirect, Route, RouteProps, useHistory } from \"react-router-dom\";\n\nexport type ProtectedRouteProps = {\n  isAllowed: boolean;\n  redirectionPath: string;\n} & RouteProps;\n\nconst ProtectedRoute = ({\n  isAllowed,\n  redirectionPath,\n  ...routeProps\n}: ProtectedRouteProps) => {\n  const history = useHistory<{ from?: string }>();\n\n  if (isAllowed) {\n    return <Route {...routeProps} />;\n  }\n\n  const dynamicRedirectionPath = history.location.state?.from;\n\n  return (\n    <Redirect\n      to={{\n        pathname: dynamicRedirectionPath || redirectionPath,\n        state: { from: history.location.pathname },\n      }}\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import React from \"react\";\nimport styles from \"./ingredient-image.module.css\";\n\ninterface IIngredientImage {\n  src: string;\n  renderDiv?: boolean;\n  style?: React.CSSProperties;\n}\nconst IngredientImage = ({\n  src,\n  renderDiv = false,\n  style,\n}: IIngredientImage) => {\n  if (renderDiv) {\n    return (\n      <div style={style} className={styles.ingredient}>\n        <img className={styles.ingredientImage} src={src} alt=\"ингредиент\" />\n      </div>\n    );\n  }\n\n  return (\n    <li style={style} className={styles.ingredient}>\n      <img className={styles.ingredientImage} src={src} alt=\"ингредиент\" />\n    </li>\n  );\n};\n\nexport default IngredientImage;\n","import cn from \"classnames\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport IngredientImage from \"./components/ingredient-image/ingredient-image\";\nimport styles from \"./feed-card.module.css\";\nimport * as H from \"history\";\nimport { TOrder } from \"../../services/slices/ws-orders\";\nimport dayjs from \"dayjs\";\n\ninterface IFeedCardProps {\n  data: TOrder;\n}\n\nexport const formatDate = (utc: string): string => {\n  const date = dayjs(utc);\n  const isToday = dayjs().startOf(\"day\").isSame(date, \"day\");\n  if (isToday) return \"Сегодня, \" + date.format(\"kk:mm\");\n  const isYesterday = dayjs().subtract(1, \"day\").isSame(date, \"day\");\n  if (isYesterday) return \"Вчера, \" + date.format(\"kk:mm\");\n  return date.format(\"DD:MM, kk:mm\");\n};\n\nconst FeedCard = ({ data }: IFeedCardProps) => {\n  const location = useLocation<{ background?: H.Location }>();\n\n  return (\n    <li className={styles.cardContainer}>\n      <Link\n        to={{\n          pathname: `feed/${data._id}`,\n          state: { background: location },\n        }}\n        className={styles.card}\n      >\n        <p className={cn(styles.header, \"text text_type_digits-default\")}>\n          #{data.number}{\" \"}\n          <time className=\"text text_type_main-default text_color_inactive\">\n            {formatDate(data.createdAt)} i-GMT+3\n          </time>\n        </p>\n        <h2 className={cn(styles.title, \"text text_type_main-medium\")}>\n          {data.name}\n        </h2>\n        <div className={styles.priceInfo}>\n          {data.modifiedIngredients && (\n            <ul className={styles.ingredientsList}>\n              {data.modifiedIngredients\n                .slice(0, 5)\n                .reverse()\n                .map((ing, i) => (\n                  <IngredientImage\n                    key={`${ing.id}-${data._id}-${i}`}\n                    src={ing.img}\n                  />\n                ))}\n            </ul>\n          )}\n          <p className={cn(styles.priceContainer)}>\n            <span className={cn(styles.price, \"text text_type_digits-default\")}>\n              {data.price ? data.price : \"–\"}\n            </span>\n            <CurrencyIcon type=\"primary\" />\n          </p>\n        </div>\n      </Link>\n    </li>\n  );\n};\n\nexport default FeedCard;\n","import styles from \"./orders.module.css\";\nimport FeedCard from \"../../../../components/feed-card/feed-card\";\nimport cn from \"classnames\";\nimport { TOrder } from \"../../../../services/slices/ws-orders\";\n\ninterface IOrdersProps {\n  data: TOrder[];\n}\n\nconst Orders = ({ data }: IOrdersProps) => {\n  return (\n    <div className={styles.orders}>\n      <ul className={cn(styles.list, \"custom-scroll\")}>\n        {data.map((o) => (\n          <FeedCard key={o._id} data={o} />\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Orders;\n","import { useAppDispatch, useAppSelector } from \"../services/hooks\";\nimport {\n  selectOrders,\n  TModifiedIngredient,\n  updateOrders,\n} from \"../services/slices/ws-orders\";\nimport { selectIngredients } from \"../services/slices/ingredients\";\nimport { useEffect, useMemo } from \"react\";\nimport { IngredientType } from \"../components/app/app.typed\";\n\nexport const useModifyOrders = () => {\n  const dispatch = useAppDispatch();\n\n  const orders = useAppSelector(selectOrders);\n  const ingredients = useAppSelector(selectIngredients);\n\n  const shouldAddPrice = useMemo(() => orders?.some((o) => o.price), [orders]);\n\n  useEffect(() => {\n    if (ingredients && orders) {\n      const updatedOrders = orders.map((order) => {\n        let orderPrice = 0;\n        const modifiedIngredients = order.ingredients.reduce(\n          (acc: TModifiedIngredient[], ingredientId) => {\n            const targetIngredient = ingredients.find(\n              (ing) => ing._id === ingredientId\n            );\n\n            if (!targetIngredient) {\n              return [\n                ...acc,\n                { id: ingredientId, img: \"\", name: \"\", price: 0, qty: 0 },\n              ];\n            }\n\n            const isBun = targetIngredient.type === IngredientType.BUN;\n\n            orderPrice += targetIngredient.price;\n            if (isBun) {\n              orderPrice += targetIngredient.price;\n            }\n\n            const foundIngredientInAccIdx = acc.findIndex(\n              (o) => o.id === targetIngredient._id\n            );\n            if (foundIngredientInAccIdx !== -1) {\n              acc[foundIngredientInAccIdx].qty += 1;\n              return acc;\n            }\n\n            const qty = isBun ? 2 : 1;\n            return [\n              ...acc,\n              {\n                id: ingredientId,\n                img: targetIngredient.image_mobile,\n                name: targetIngredient.name,\n                price: targetIngredient.price,\n                qty,\n              },\n            ];\n          },\n          []\n        );\n        return { ...order, price: orderPrice, modifiedIngredients };\n      });\n      dispatch(updateOrders(updatedOrders));\n    }\n  }, [shouldAddPrice]);\n};\n","import React, { useEffect } from \"react\";\nimport cn from \"classnames\";\nimport styles from \"./order-details.module.css\";\nimport IngredientImage from \"../../components/feed-card/components/ingredient-image/ingredient-image\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { selectOrderById } from \"../../services/slices/ws-orders\";\nimport { useParams } from \"react-router-dom\";\nimport { useAppSelector, useAppDispatch } from \"../../services/hooks\";\nimport { fetchOrdersThunk } from \"../../services/slices/order\";\nimport { useModifyOrders } from \"../../hooks/useModifyOrders\";\n\ninterface IOrderDetails {\n  style?: React.CSSProperties;\n}\n\nexport const OrderReadyStatus = {\n  PENDING: \"pending\",\n  DONE: \"done\",\n};\n\nexport const OrderStatusOutput = {\n  PENDING: \"Готовится\",\n  DONE: \"Выполнен\",\n};\n\nconst OrderDetails = ({ style }: IOrderDetails) => {\n  const dispatch = useAppDispatch();\n  const { id } = useParams<{ id: string }>();\n  const ordersFromSockets = useAppSelector(selectOrderById(id));\n\n  useEffect(() => {\n    if (!ordersFromSockets) {\n      dispatch(fetchOrdersThunk());\n    }\n  }, [ordersFromSockets]);\n\n  useModifyOrders();\n\n  if (!ordersFromSockets) {\n    return null;\n  }\n\n  const orderStatus =\n    ordersFromSockets.status.toUpperCase() as keyof typeof OrderStatusOutput;\n\n  return (\n    <div style={style} className={styles.root}>\n      <p\n        className=\"text text_type_digits-default mb-10\"\n        style={{ textAlign: \"center\" }}\n      >\n        #{ordersFromSockets.number}\n      </p>\n      <h1 className=\"text text_type_main-medium mb-3\">\n        {ordersFromSockets.name}\n      </h1>\n      <p className=\"text text_type_main-default mb-15\">\n        {OrderStatusOutput[orderStatus]}\n      </p>\n      <p className=\"text text_type_main-medium mb-6\">Состав:</p>\n      <ul className={cn(styles.list, \"custom-scroll mb-10\")}>\n        {ordersFromSockets.modifiedIngredients?.map((ing, i) => (\n          <li key={ing.id} className={styles.ingredient}>\n            <IngredientImage\n              key={`${ing.id}-${ordersFromSockets._id}-${i}`}\n              style={{ margin: 0 }}\n              src={ing.img}\n              renderDiv\n            />\n            <p\n              className={cn(\n                styles.title,\n                \"text text_type_main-default ml-4 mr-4\"\n              )}\n            >\n              {ing.name}\n            </p>\n            <p className={styles.priceContainer}>\n              <span className=\"text text_type_main-default mr-2\">\n                {ing.qty} x {ing.price}\n              </span>{\" \"}\n              <CurrencyIcon type=\"primary\" />\n            </p>\n          </li>\n        ))}\n      </ul>\n      <div className={styles.info}>\n        <time className=\"text text_type_main-default text_color_inactive\">\n          Вчера, 13:50 i-GMT+3\n        </time>\n        <div style={{ marginLeft: \"auto\" }} className={styles.priceContainer}>\n          <span className=\"text text_type_main-default mr-2\">\n            {ordersFromSockets.price}\n          </span>{\" \"}\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderDetails;\n","import cn from \"classnames\";\nimport styles from \"./stats.module.css\";\nimport { useMemo } from \"react\";\nimport { useAppSelector } from \"../../../../services/hooks\";\nimport { selectOrders } from \"../../../../services/slices/ws-orders\";\nimport { OrderReadyStatus } from \"../../../order-details/order-details\";\n\ninterface IStatsProps {\n  data: {\n    total: number | undefined;\n    totalToday: number | undefined;\n  };\n}\n\nconst Stats = ({ data }: IStatsProps) => {\n  const orders = useAppSelector(selectOrders);\n  const pendingOrders = useMemo(\n    () =>\n      orders\n        ?.filter((o) => o.status === OrderReadyStatus.PENDING)\n        .map((o) => o.number),\n    [orders]\n  );\n  const doneOrders = useMemo(\n    () =>\n      orders\n        ?.filter((o) => o.status === OrderReadyStatus.DONE)\n        .map((o) => o.number),\n    [orders]\n  );\n  return (\n    <div className={styles.stats}>\n      <div className={styles.ordersStatuses}>\n        <div className={styles.ordersStatus}>\n          <p className=\"text text_type_main-medium mb-6\">Готовы:</p>\n          <ul className={styles.idsList}>\n            {doneOrders?.slice(0, 10).map((o) => (\n              <li\n                key={o}\n                className={cn(\n                  styles.orderId,\n                  styles.orderId_highlight,\n                  \"text text_type_digits-default\"\n                )}\n              >\n                {o}\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div className={styles.ordersStatus}>\n          <p className=\"text text_type_main-medium mb-6\">В работе:</p>\n          <ul className={styles.idsList}>\n            {pendingOrders?.slice(0, 10).map((o) => (\n              <li\n                key={o}\n                className={cn(styles.orderId, \"text text_type_digits-default\")}\n              >\n                {o}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n      <div className={styles.globalStats}>\n        <p className=\"text text_type_main-medium\">Выполнено за все время:</p>\n        <span className={cn(styles.stat, \"text text_type_digits-large\")}>\n          {data.total === undefined ? \"–\" : data.total}\n        </span>\n      </div>\n      <div className={styles.globalStats}>\n        <p className=\"text text_type_main-medium\">Выполнено за сегодня:</p>\n        <span className={cn(styles.stat, \"text text_type_digits-large\")}>\n          {data.totalToday === undefined ? \"–\" : data.totalToday}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default Stats;\n","import Layout from \"../../components/layout/layout\";\n\nimport Orders from \"./components/orders/orders\";\nimport Stats from \"./components/stats/stats\";\n\nimport styles from \"./orders-feed.module.css\";\nimport { useAppDispatch, useAppSelector } from \"../../services/hooks\";\nimport { useEffect } from \"react\";\nimport {\n  WS_ORDER_ACTIONS,\n  selectOrders,\n  selectStats,\n} from \"../../services/slices/ws-orders\";\nimport { useModifyOrders } from \"../../hooks/useModifyOrders\";\n\nconst OrdersFeed = () => {\n  const dispatch = useAppDispatch();\n  const orders = useAppSelector(selectOrders);\n  const stats = useAppSelector(selectStats);\n\n  useEffect(() => {\n    dispatch({ type: WS_ORDER_ACTIONS.wsInit });\n\n    return () => {\n      dispatch({ type: WS_ORDER_ACTIONS.wsClose });\n    };\n  }, []);\n\n  useModifyOrders();\n\n  return (\n    <Layout>\n      <div className={styles.root}>\n        <h1 className=\"text text_type_main-large mt-10 mb-5\">Лента заказов</h1>\n        <div className={styles.content}>\n          {orders ? (\n            <Orders data={orders} />\n          ) : (\n            <div style={{ width: \"100%\", minWidth: 604 }} />\n          )}\n          <Stats data={stats} />\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default OrdersFeed;\n","import React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport cn from \"classnames\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport IngredientImage from \"../../../../components/feed-card/components/ingredient-image/ingredient-image\";\nimport styles from \"./order.module.css\";\nimport * as H from \"history\";\nimport { TOrder } from \"../../../../services/slices/ws-orders\";\nimport { formatDate } from \"../../../../components/feed-card/feed-card\";\nimport { OrderStatusOutput } from \"../../../order-details/order-details\";\n\ninterface IOrderProps {\n  data: TOrder;\n}\n\nconst Order = ({ data }: IOrderProps) => {\n  const location = useLocation<{ background?: H.Location }>();\n\n  const orderStatus =\n    data.status.toUpperCase() as keyof typeof OrderStatusOutput;\n\n  return (\n    <li className={styles.orderContainer}>\n      <Link\n        className={styles.order}\n        to={{\n          pathname: `orders/${data._id}`,\n          state: { background: location },\n        }}\n      >\n        <p className={styles.header}>\n          <span className=\"text text_type_digits-default\">#{data.number}</span>\n          <time className=\"text text_type_main-default text_color_inactive\">\n            {formatDate(data.createdAt)} i-GMT+3\n          </time>\n        </p>\n        <p className=\"text text_type_main-medium mb-2\">{data.name}</p>\n        <p className=\"text text_type_main-default mb-6\">\n          {OrderStatusOutput[orderStatus]}\n        </p>\n\n        <div className={styles.ingredientsContainer}>\n          <ul className={styles.ingredientsList}>\n            {data.modifiedIngredients?.slice(0, 5).map((ing, i) => (\n              <IngredientImage\n                key={`${ing.id}-${data._id}-${i}`}\n                src={ing.img}\n              />\n            ))}\n          </ul>\n          <p className={cn(styles.priceContainer)}>\n            <span className=\"text text_type_digits-default mr-2\">\n              {data.price}\n            </span>\n            <CurrencyIcon type=\"primary\" />\n          </p>\n        </div>\n      </Link>\n    </li>\n  );\n};\n\nexport default Order;\n","import React, { useEffect } from \"react\";\nimport ProfileSidebar from \"../../components/profile-sidebar/profile-sidebar\";\nimport Layout from \"../../components/layout/layout\";\n\nimport styles from \"./orders-list.module.css\";\nimport Order from \"./components/order/order\";\nimport cn from \"classnames\";\nimport { useAppDispatch, useAppSelector } from \"../../services/hooks\";\nimport {\n  selectIsAuthenticated,\n  selectAccessToken,\n} from \"../../services/slices/user\";\nimport {\n  WS_ORDER_ACTIONS,\n  selectOrders,\n} from \"../../services/slices/ws-orders\";\nimport { useModifyOrders } from \"../../hooks/useModifyOrders\";\n\nexport const CONTAINER_STYLE = {\n  maxWidth: 1280,\n  padding: \"0 40px\",\n  display: \"flex\",\n  margin: \"120px auto 0\",\n};\n\nconst OrdersList: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const isAuthenticated = useAppSelector(selectIsAuthenticated);\n  const orders = useAppSelector(selectOrders);\n  const accessToken = useAppSelector(selectAccessToken);\n\n  useModifyOrders();\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      dispatch({\n        type: WS_ORDER_ACTIONS.wsInitWithCustomUrl,\n        payload: `wss://norma.nomoreparties.space/orders?token=${accessToken}`,\n      });\n    }\n\n    return () => {\n      dispatch({ type: WS_ORDER_ACTIONS.wsClose });\n    };\n  }, [isAuthenticated]);\n\n  return (\n    <Layout>\n      <div style={CONTAINER_STYLE}>\n        <ProfileSidebar />\n        <div className={styles.root}>\n          {orders && (\n            <ul className={cn(styles.list, \"custom-scroll\")}>\n              {orders\n                .slice()\n                .reverse()\n                .map((o) => (\n                  <Order key={o._id} data={o} />\n                ))}\n            </ul>\n          )}\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default OrdersList;\n","import React, { useEffect, useCallback } from \"react\";\nimport dayjs from \"dayjs\";\nimport { Route, Switch, useHistory, useLocation } from \"react-router-dom\";\nimport {\n  ForgotPassword,\n  Ingredient,\n  Login,\n  Main,\n  NotFound,\n  Profile,\n  Register,\n  ResetPassword,\n} from \"../../pages\";\nimport { useAppDispatch, useAppSelector } from \"../../services/hooks\";\nimport {\n  selectIsAuthenticated,\n  getUser,\n  refreshToken,\n  selectCanResetPassword,\n} from \"../../services/slices/user\";\nimport ProtectedRoute from \"../protected-route/protected-route\";\nimport OrdersFeed from \"../../pages/orders-feed/orders-feed\";\nimport Modal from \"../modal/modal\";\nimport * as H from \"history\";\nimport OrderDetails from \"../../pages/order-details/order-details\";\nimport OrdersList from \"../../pages/orders-list/orders-list\";\nimport Layout from \"../layout/layout\";\nimport IngredientDetails from \"../ingredient-details/ingredient-details\";\n\nimport AdvancedFormat from \"dayjs/plugin/advancedFormat\";\nimport { fetchIngredients } from \"../../services/slices/ingredients\";\ndayjs.extend(AdvancedFormat);\n\nconst App = () => {\n  const history = useHistory();\n  const location = useLocation<{ background?: H.Location }>();\n  const dispatch = useAppDispatch();\n\n  const isAuthenticated = useAppSelector(selectIsAuthenticated);\n  const canResetPassword = useAppSelector(selectCanResetPassword);\n\n  let background = location.state && location.state.background;\n\n  const handleLoad = useCallback(async () => {\n    await dispatch(refreshToken());\n    dispatch(getUser());\n  }, [dispatch]);\n\n  useEffect(() => {\n    handleLoad();\n  }, [handleLoad]);\n\n  useEffect(() => {\n    dispatch(fetchIngredients());\n  }, []);\n\n  const onModalClose = (href: string) => {\n    history.push(href);\n  };\n\n  return (\n    <div>\n      <Switch location={background || location}>\n        <ProtectedRoute\n          path=\"/login\"\n          exact\n          isAllowed={!isAuthenticated}\n          redirectionPath=\"/\"\n        >\n          <Login />\n        </ProtectedRoute>\n        <ProtectedRoute\n          path=\"/register\"\n          exact\n          isAllowed={!isAuthenticated}\n          redirectionPath=\"/\"\n        >\n          <Register />\n        </ProtectedRoute>\n        <ProtectedRoute\n          path=\"/forgot-password\"\n          exact\n          isAllowed={!isAuthenticated}\n          redirectionPath=\"/\"\n        >\n          <ForgotPassword />\n        </ProtectedRoute>\n        <ProtectedRoute\n          path=\"/reset-password\"\n          exact\n          isAllowed={canResetPassword}\n          redirectionPath=\"/\"\n        >\n          <ResetPassword />\n        </ProtectedRoute>\n        <Route exact path=\"/\">\n          <Main />\n        </Route>\n        <Route path=\"/ingredients/:id\">\n          <Ingredient />\n        </Route>\n        <ProtectedRoute\n          path=\"/profile\"\n          exact\n          redirectionPath=\"/login\"\n          isAllowed={isAuthenticated}\n        >\n          <Profile />\n        </ProtectedRoute>\n        <ProtectedRoute\n          path=\"/profile/orders\"\n          exact\n          redirectionPath=\"/login\"\n          isAllowed={isAuthenticated}\n        >\n          <OrdersList />\n        </ProtectedRoute>\n        <ProtectedRoute\n          path=\"/profile/orders/:id\"\n          exact\n          redirectionPath=\"/login\"\n          isAllowed={isAuthenticated}\n        >\n          <Layout>\n            <OrderDetails />\n          </Layout>\n        </ProtectedRoute>\n        <Route path=\"/feed\" exact>\n          <OrdersFeed />\n        </Route>\n        <Route path=\"/feed/:id\" exact>\n          <Layout>\n            <OrderDetails />\n          </Layout>\n        </Route>\n        <Route>\n          <NotFound />\n        </Route>\n      </Switch>\n      {background && (\n        <Route path=\"/profile/orders/:id\">\n          <Modal open={true} onClose={() => onModalClose(\"/profile/orders\")}>\n            <OrderDetails style={{ marginTop: 0, minWidth: 640 }} />\n          </Modal>\n        </Route>\n      )}\n      {background && (\n        <Route path=\"/feed/:id\">\n          <Modal open={true} onClose={() => onModalClose(\"/feed\")}>\n            <OrderDetails style={{ marginTop: 0, minWidth: 640 }} />\n          </Modal>\n        </Route>\n      )}\n      {background && (\n        <Route path=\"/ingredients/:id\">\n          <Modal\n            id=\"ingredientModal\"\n            open={true}\n            onClose={() => onModalClose(\"/\")}\n          >\n            <IngredientDetails />\n          </Modal>\n        </Route>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport ingredientsReducer from \"./slices/ingredients\";\nimport orderReducer from \"./slices/order\";\nimport userReducer from \"./slices/user\";\nimport wsOrderReducer, { WS_ORDER_ACTIONS } from \"./slices/ws-orders\";\nimport { socketMiddleware } from \"../middleware/socket-middleware\";\nimport logger from \"redux-logger\";\n\nexport const store = configureStore({\n  reducer: {\n    ingredients: ingredientsReducer,\n    order: orderReducer,\n    user: userReducer,\n    wsOrders: wsOrderReducer,\n  },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat(\n      socketMiddleware(\n        \"wss://norma.nomoreparties.space/orders/all\",\n        WS_ORDER_ACTIONS\n      ),\n      logger\n    ),\n});\n\nexport type Store = typeof store;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n","import { Middleware } from \"redux\";\n\nexport const socketMiddleware = (\n  wsUrl: string,\n  wsActions: { [key: string]: string }\n): Middleware => {\n  return (store) => {\n    let socket: WebSocket | null = null;\n\n    return (next) => (action: any) => {\n      const { dispatch, getState } = store;\n      const { accessToken } = getState().user;\n      const { type, payload } = action;\n      const {\n        wsInit,\n        wsInitWithCustomUrl,\n        wsSendMessage,\n        wsClose,\n        onOpen,\n        onClose,\n        onError,\n        onMessage,\n      } = wsActions;\n\n      if (type === wsInit) {\n        socket = new WebSocket(wsUrl);\n      }\n      if (type === wsInitWithCustomUrl) {\n        socket = new WebSocket(payload);\n      }\n\n      if (socket) {\n        socket.onopen = () => {\n          dispatch({ type: onOpen });\n        };\n\n        socket.onerror = () => {\n          dispatch({ type: onError });\n        };\n\n        socket.onmessage = (event) => {\n          const { data } = event;\n          const parsedData = JSON.parse(data);\n          const { success, ...restParsedData } = parsedData;\n\n          dispatch({ type: onMessage, payload: restParsedData });\n        };\n\n        socket.onclose = () => {\n          dispatch({ type: onClose });\n        };\n\n        if (type === wsSendMessage) {\n          const message = { ...payload, token: accessToken };\n          socket.send(JSON.stringify(message));\n        }\n        if (type === wsClose) {\n          socket.close();\n        }\n      }\n\n      next(action);\n    };\n  };\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport App from \"./components/app/app\";\nimport { store } from \"./services/store\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"burger-constructor_root__1kSmR pt-25\",\"root_over\":\"burger-constructor_root_over__kCE8-\",\"list\":\"burger-constructor_list__2lXaw\",\"item\":\"burger-constructor_item__9YfeG\",\"listItem\":\"burger-constructor_listItem__3T5pd\",\"ingredientContainer\":\"burger-constructor_ingredientContainer__29Dsf\",\"ingredientContainer_outter\":\"burger-constructor_ingredientContainer_outter__1WLTE\",\"button\":\"burger-constructor_button__3bxLu\",\"results\":\"burger-constructor_results__3sY99\",\"totalCost\":\"burger-constructor_totalCost__1Bs-S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"app-header_root__1LpUj\",\"container\":\"app-header_container__2ER_-\",\"linksContainer\":\"app-header_linksContainer__3HHtP\",\"logo\":\"app-header_logo__zVEfY\",\"link\":\"app-header_link__2y8TU pr-5 pl-5 pt-4 pb-4 mr-2\",\"link_active\":\"app-header_link_active__vLEYL\",\"link_right\":\"app-header_link_right__23rsB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"form_form__1Ljzh\",\"title\":\"form_title__7AGX4\",\"inputContainer\":\"form_inputContainer__362H3\",\"buttonWrapper\":\"form_buttonWrapper__ewnap\",\"hint\":\"form_hint__3dWAK\",\"hintLink\":\"form_hintLink__136bT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"feed-card_card__2oJ5K\",\"cardContainer\":\"feed-card_cardContainer__1x9F3\",\"header\":\"feed-card_header__1lTkG\",\"title\":\"feed-card_title__1ywF-\",\"priceInfo\":\"feed-card_priceInfo__1GpWA\",\"ingredientsList\":\"feed-card_ingredientsList__XnAu_\",\"overlay\":\"feed-card_overlay__2kgRk\",\"priceContainer\":\"feed-card_priceContainer__3gH11\",\"price\":\"feed-card_price__3ve4J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"profile-sidebar_root__2pbrR\",\"tabs\":\"profile-sidebar_tabs__3CQUg\",\"text\":\"profile-sidebar_text__1hG_9\",\"link\":\"profile-sidebar_link__4CgBC text_color_inactive\",\"link_active\":\"profile-sidebar_link_active__VQQ5w\",\"button\":\"profile-sidebar_button__1Uuqy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"order-details_root__2_5o7\",\"list\":\"order-details_list__3ux2F\",\"ingredient\":\"order-details_ingredient__3ci9V\",\"title\":\"order-details_title__a8VFk\",\"priceContainer\":\"order-details_priceContainer__4LX12\",\"info\":\"order-details_info__1YX30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order_order__1OifF\",\"orderContainer\":\"order_orderContainer__25JkA\",\"header\":\"order_header__2FaG5\",\"ingredientsContainer\":\"order_ingredientsContainer__mSlT3\",\"ingredientsList\":\"order_ingredientsList__JuXvK\",\"priceContainer\":\"order_priceContainer__2cHpE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"ingredient-image_ingredient__6JHKr\",\"ingredientImage\":\"ingredient-image_ingredientImage__3p1t9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"app_root__2y0JE\",\"burgerContainer\":\"app_burgerContainer__13Y3H pl-5 pr-5 pb-10\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"edit-profile_form__lDfbu\",\"buttons\":\"edit-profile_buttons__nf1h2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orders\":\"orders_orders__1LFuS\",\"list\":\"orders_list__2cQbh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"orders-feed_root__2xjai\",\"content\":\"orders-feed_content__16me2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"orders-list_root__31Tey\",\"list\":\"orders-list_list__2WJgy\"};"],"sourceRoot":""}